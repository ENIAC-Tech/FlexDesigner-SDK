import e from"events";import t from"https";import r from"http";import n from"net";import i from"tls";import o from"crypto";import s from"stream";import a from"url";import l from"zlib";import u from"buffer";import c from"util";import f from"os";import h from"fs";import d from"path";import p from"tty";import g from"string_decoder";var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var v,_,w,S,E,x,k,O={},M={exports:{}};function j(){return _?v:(_=1,v={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}})}function T(){if(w)return M.exports;w=1;const{EMPTY_BUFFER:e}=j(),t=Buffer[Symbol.species];function r(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function n(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(M.exports={concat:function(r,n){if(0===r.length)return e;if(1===r.length)return r[0];const i=Buffer.allocUnsafe(n);let o=0;for(let e=0;e<r.length;e++){const t=r[e];i.set(t,o),o+=t.length}return o<n?new t(i.buffer,i.byteOffset,o):i},mask:r,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(r){if(e.readOnly=!0,Buffer.isBuffer(r))return r;let n;return r instanceof ArrayBuffer?n=new t(r):ArrayBuffer.isView(r)?n=new t(r.buffer,r.byteOffset,r.byteLength):(n=Buffer.from(r),e.readOnly=!1),n},unmask:n},!process.env.WS_NO_BUFFER_UTIL)try{const e=require("bufferutil");M.exports.mask=function(t,n,i,o,s){s<48?r(t,n,i,o,s):e.mask(t,n,i,o,s)},M.exports.unmask=function(t,r){t.length<32?n(t,r):e.unmask(t,r)}}catch(e){}return M.exports}function R(){if(k)return x;k=1;const e=l,t=T(),r=function(){if(E)return S;E=1;const e=Symbol("kDone"),t=Symbol("kRun");return S=class{constructor(r){this[e]=()=>{this.pending--,this[t]()},this.concurrency=r||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[t]()}[t](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[e])}}}}(),{kStatusCode:n}=j(),i=Buffer[Symbol.species],o=Buffer.from([0,0,255,255]),s=Symbol("permessage-deflate"),a=Symbol("total-length"),u=Symbol("callback"),c=Symbol("buffers"),f=Symbol("error");let h;function d(e){this[c].push(e),this[a]+=e.length}function p(e){this[a]+=e.length,this[s]._maxPayload<1||this[a]<=this[s]._maxPayload?this[c].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][n]=1009,this.removeListener("data",p),this.reset())}function g(e){this[s]._inflate=null,e[n]=1007,this[u](e)}return x=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!h){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;h=new r(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){h.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){h.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(r,n,i){const l=this._isServer?"client":"server";if(!this._inflate){const t=`${l}_max_window_bits`,r="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:r}),this._inflate[s]=this,this._inflate[a]=0,this._inflate[c]=[],this._inflate.on("error",g),this._inflate.on("data",p)}this._inflate[u]=i,this._inflate.write(r),n&&this._inflate.write(o),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void i(e);const r=t.concat(this._inflate[c],this._inflate[a]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[a]=0,this._inflate[c]=[],n&&this.params[`${l}_no_context_takeover`]&&this._inflate.reset()),i(null,r)}))}_compress(r,n,o){const s=this._isServer?"server":"client";if(!this._deflate){const t=`${s}_max_window_bits`,r="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:r}),this._deflate[a]=0,this._deflate[c]=[],this._deflate.on("data",d)}this._deflate[u]=o,this._deflate.write(r),this._deflate.flush(e.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=t.concat(this._deflate[c],this._deflate[a]);n&&(e=new i(e.buffer,e.byteOffset,e.length-4)),this._deflate[u]=null,this._deflate[a]=0,this._deflate[c]=[],n&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),o(null,e)}))}}}var P,N,C,L,A,D,$,I,U,F,B,W,q,G,z,H,V,Y,J,Z={exports:{}};function K(){if(P)return Z.exports;P=1;const{isUtf8:e}=u;function t(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(Z.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:t,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},e)Z.exports.isValidUTF8=function(r){return r.length<24?t(r):e(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const e=require("utf-8-validate");Z.exports.isValidUTF8=function(r){return r.length<32?t(r):e(r)}}catch(e){}return Z.exports}function X(){if(C)return N;C=1;const{Writable:e}=s,t=R(),{BINARY_TYPES:r,EMPTY_BUFFER:n,kStatusCode:i,kWebSocket:o}=j(),{concat:a,toArrayBuffer:l,unmask:u}=T(),{isValidStatusCode:c,isValidUTF8:f}=K(),h=Buffer[Symbol.species];return N=class extends e{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||r[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[o]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new h(t.buffer,t.byteOffset+e,t.length-e),new h(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new h(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const r=this.consume(2);if(48&r[0]){return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}const n=!(64&~r[0]);if(!n||this._extensions[t.extensionName]){if(this._fin=!(128&~r[0]),this._opcode=15&r[0],this._payloadLength=127&r[1],0===this._opcode){if(n){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=n}else{if(!(this._opcode>7&&this._opcode<11)){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(n){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~r[1]),this._isServer){if(!this._masked){return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else{e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);if(r>Math.pow(2,21)-1){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}else this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}else this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=n;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&u(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,r){this._extensions[t.extensionName].decompress(e,this._fin,((e,t)=>{if(e)return r(e);if(t.length){if(this._messageLength+=t.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void r(e)}this._fragments.push(t)}this.dataMessage(r),0===this._state&&this.startLoop(r)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?a(r,t):"arraybuffer"===this._binaryType?l(a(r,t)):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)})))}else{const n=a(r,t);if(!this._skipUTF8Validation&&!f(n)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,n),this.end();else{const r=e.readUInt16BE(0);if(!c(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const n=new h(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(n)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0}}createError(e,t,r,n,o){this._loop=!1,this._errored=!0;const s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=o,s[i]=n,s}}}function Q(){if(A)return L;A=1;const{randomFillSync:e}=o,t=R(),{EMPTY_BUFFER:r}=j(),{isValidStatusCode:n}=K(),{mask:i,toBuffer:s}=T(),a=Symbol("kByteLength"),l=Buffer.alloc(4);class u{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,r){let n,o,s=!1,u=2,c=!1;r.mask&&(n=r.maskBuffer||l,r.generateMask?r.generateMask(n):e(n,0,4),c=!(n[0]|n[1]|n[2]|n[3]),u=6),"string"==typeof t?o=r.mask&&!c||void 0===r[a]?(t=Buffer.from(t)).length:r[a]:(o=t.length,s=r.mask&&r.readOnly&&!c);let f=o;o>=65536?(u+=8,f=127):o>125&&(u+=2,f=126);const h=Buffer.allocUnsafe(s?o+u:u);return h[0]=r.fin?128|r.opcode:r.opcode,r.rsv1&&(h[0]|=64),h[1]=f,126===f?h.writeUInt16BE(o,2):127===f&&(h[2]=h[3]=0,h.writeUIntBE(o,4,6)),r.mask?(h[1]|=128,h[u-4]=n[0],h[u-3]=n[1],h[u-2]=n[2],h[u-1]=n[3],c?[h,t]:s?(i(t,n,h,u,o),[h]):(i(t,n,t,0,o),[h,t])):[h,t]}close(e,t,i,o){let s;if(void 0===e)s=r;else{if("number"!=typeof e||!n(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+r),s.writeUInt16BE(e,0),"string"==typeof t?s.write(t,2):s.set(t,2)}else s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0)}const l={[a]:s.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,l,o]):this.sendFrame(u.frame(s,l),o)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=s(e)).length,i=s.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[a]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(u.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=s(e)).length,i=s.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[a]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(u.frame(e,o),r)}send(e,r,n){const i=this._extensions[t.extensionName];let o,l,c=r.binary?2:1,f=r.compress;if("string"==typeof e?(o=Buffer.byteLength(e),l=!1):(o=(e=s(e)).length,l=s.readOnly),this._firstFragment?(this._firstFragment=!1,f&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(f=o>=i._threshold),this._compress=f):(f=!1,c=0),r.fin&&(this._firstFragment=!0),i){const t={[a]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:c,readOnly:l,rsv1:f};this._deflating?this.enqueue([this.dispatch,e,this._compress,t,n]):this.dispatch(e,this._compress,t,n)}else this.sendFrame(u.frame(e,{[a]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:c,readOnly:l,rsv1:!1}),n)}dispatch(e,r,n,i){if(!r)return void this.sendFrame(u.frame(e,n),i);const o=this._extensions[t.extensionName];this._bufferedBytes+=n[a],this._deflating=!0,o.compress(e,n.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t],n=r[r.length-1];"function"==typeof n&&n(e)}}else this._bufferedBytes-=n[a],this._deflating=!1,n.readOnly=!1,this.sendFrame(u.frame(t,n),i),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][a],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][a],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}return L=u}function ee(){if(U)return I;U=1;const{tokenChars:e}=K();function t(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}return I={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(r){const n=Object.create(null);let i,o,s=Object.create(null),a=!1,l=!1,u=!1,c=-1,f=-1,h=-1,d=0;for(;d<r.length;d++)if(f=r.charCodeAt(d),void 0===i)if(-1===h&&1===e[f])-1===c&&(c=d);else if(0===d||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d);const e=r.slice(c,h);44===f?(t(n,e,s),s=Object.create(null)):i=e,c=h=-1}}else-1===h&&-1!==c&&(h=d);else if(void 0===o)if(-1===h&&1===e[f])-1===c&&(c=d);else if(32===f||9===f)-1===h&&-1!==c&&(h=d);else if(59===f||44===f){if(-1===c)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d),t(s,r.slice(c,h),!0),44===f&&(t(n,i,s),s=Object.create(null),i=void 0),c=h=-1}else{if(61!==f||-1===c||-1!==h)throw new SyntaxError(`Unexpected character at index ${d}`);o=r.slice(c,d),c=h=-1}else if(l){if(1!==e[f])throw new SyntaxError(`Unexpected character at index ${d}`);-1===c?c=d:a||(a=!0),l=!1}else if(u)if(1===e[f])-1===c&&(c=d);else if(34===f&&-1!==c)u=!1,h=d;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${d}`);l=!0}else if(34===f&&61===r.charCodeAt(d-1))u=!0;else if(-1===h&&1===e[f])-1===c&&(c=d);else if(-1===c||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${d}`);-1===h&&(h=d);let e=r.slice(c,h);a&&(e=e.replace(/\\/g,""),a=!1),t(s,o,e),44===f&&(t(n,i,s),s=Object.create(null),i=void 0),o=void 0,c=h=-1}}else-1===h&&(h=d);if(-1===c||u||32===f||9===f)throw new SyntaxError("Unexpected end of input");-1===h&&(h=d);const p=r.slice(c,h);return void 0===i?t(n,p,s):(void 0===o?t(s,p,!0):t(s,o,a?p.replace(/\\/g,""):p),t(n,i,s)),n}},I}function te(){if(B)return F;B=1;const s=e,l=t,u=r,c=n,f=i,{randomBytes:h,createHash:d}=o,{URL:p}=a,g=R(),m=X(),b=Q(),{BINARY_TYPES:y,EMPTY_BUFFER:v,GUID:_,kForOnEventAttribute:w,kListener:S,kStatusCode:E,kWebSocket:x,NOOP:k}=j(),{EventTarget:{addEventListener:O,removeEventListener:M}}=function(){if($)return D;$=1;const{kForOnEventAttribute:e,kListener:t}=j(),r=Symbol("kCode"),n=Symbol("kData"),i=Symbol("kError"),o=Symbol("kMessage"),s=Symbol("kReason"),a=Symbol("kTarget"),l=Symbol("kType"),u=Symbol("kWasClean");class c{constructor(e){this[a]=null,this[l]=e}get target(){return this[a]}get type(){return this[l]}}Object.defineProperty(c.prototype,"target",{enumerable:!0}),Object.defineProperty(c.prototype,"type",{enumerable:!0});class f extends c{constructor(e,t={}){super(e),this[r]=void 0===t.code?0:t.code,this[s]=void 0===t.reason?"":t.reason,this[u]=void 0!==t.wasClean&&t.wasClean}get code(){return this[r]}get reason(){return this[s]}get wasClean(){return this[u]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class h extends c{constructor(e,t={}){super(e),this[i]=void 0===t.error?null:t.error,this[o]=void 0===t.message?"":t.message}get error(){return this[i]}get message(){return this[o]}}Object.defineProperty(h.prototype,"error",{enumerable:!0}),Object.defineProperty(h.prototype,"message",{enumerable:!0});class d extends c{constructor(e,t={}){super(e),this[n]=void 0===t.data?null:t.data}get data(){return this[n]}}Object.defineProperty(d.prototype,"data",{enumerable:!0});const p={addEventListener(r,n,i={}){for(const o of this.listeners(r))if(!i[e]&&o[t]===n&&!o[e])return;let o;if("message"===r)o=function(e,t){const r=new d("message",{data:t?e:e.toString()});r[a]=this,g(n,this,r)};else if("close"===r)o=function(e,t){const r=new f("close",{code:e,reason:t.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[a]=this,g(n,this,r)};else if("error"===r)o=function(e){const t=new h("error",{error:e,message:e.message});t[a]=this,g(n,this,t)};else{if("open"!==r)return;o=function(){const e=new c("open");e[a]=this,g(n,this,e)}}o[e]=!!i[e],o[t]=n,i.once?this.once(r,o):this.on(r,o)},removeEventListener(r,n){for(const i of this.listeners(r))if(i[t]===n&&!i[e]){this.removeListener(r,i);break}}};function g(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}return D={CloseEvent:f,ErrorEvent:h,Event:c,EventTarget:p,MessageEvent:d}}(),{format:P,parse:N}=ee(),{toBuffer:C}=T(),L=Symbol("kAborted"),A=[8,13],I=["CONNECTING","OPEN","CLOSING","CLOSED"],U=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class W extends s{constructor(e,t,r){super(),this._binaryType=y[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=v,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=W.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),q(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){y.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new m({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new b(e,this._extensions,r.generateMask),this._receiver=n,this._socket=e,n[x]=this,e[x]=this,n.on("conclude",J),n.on("drain",Z),n.on("error",K),n.on("message",re),n.on("ping",ne),n.on("pong",ie),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",se),e.on("data",ae),e.on("end",le),e.on("error",ue),this._readyState=W.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=W.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[g.extensionName]&&this._extensions[g.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=W.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==W.CLOSED)if(this.readyState!==W.CONNECTING)this.readyState!==W.CLOSING?(this._readyState=W.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";V(this,this._req,e)}}pause(){this.readyState!==W.CONNECTING&&this.readyState!==W.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===W.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===W.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||v,t,r)):Y(this,e,r)}pong(e,t,r){if(this.readyState===W.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===W.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||v,t,r)):Y(this,e,r)}resume(){this.readyState!==W.CONNECTING&&this.readyState!==W.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===W.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==W.OPEN)return void Y(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[g.extensionName]||(n.compress=!1),this._sender.send(e||v,n,r)}terminate(){if(this.readyState!==W.CLOSED)if(this.readyState!==W.CONNECTING)this._socket&&(this._readyState=W.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";V(this,this._req,e)}}}function q(e,t,r,n){const i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:A[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=i.autoPong,!A.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${A.join(", ")})`);let o;if(t instanceof p)o=t;else try{o=new p(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===o.protocol?o.protocol="ws:":"https:"===o.protocol&&(o.protocol="wss:"),e._url=o.href;const s="wss:"===o.protocol,a="ws+unix:"===o.protocol;let c;if("ws:"===o.protocol||s||a?a&&!o.pathname?c="The URL's pathname is empty":o.hash&&(c="The URL contains a fragment identifier"):c='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',c){const t=new SyntaxError(c);if(0===e._redirects)throw t;return void G(e,t)}const f=s?443:80,m=h(16).toString("base64"),b=s?l.request:u.request,y=new Set;let v,w;if(i.createConnection=i.createConnection||(s?H:z),i.defaultPort=i.defaultPort||f,i.port=o.port||f,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(v=new g(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=P({[g.extensionName]:v.offer()})),r.length){for(const e of r){if("string"!=typeof e||!U.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){const e=i.path.split(":");i.socketPath=e[0],i.path=e[1]}if(i.followRedirects){if(0===e._redirects){e._originalIpc=a,e._originalSecure=s,e._originalHostOrSocketPath=a?i.socketPath:o.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=a?!!e._originalIpc&&i.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&o.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,t||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),w=e._req=b(i),e._redirects&&e.emit("redirect",e.url,w)}else w=e._req=b(i);i.timeout&&w.on("timeout",(()=>{V(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{null===w||w[L]||(w=e._req=null,G(e,t))})),w.on("response",(o=>{const s=o.headers.location,a=o.statusCode;if(s&&i.followRedirects&&a>=300&&a<400){if(++e._redirects>i.maxRedirects)return void V(e,w,"Maximum redirects exceeded");let o;w.abort();try{o=new p(s,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${s}`);return void G(e,r)}q(e,o,r,n)}else e.emit("unexpected-response",w,o)||V(e,w,`Unexpected server response: ${o.statusCode}`)})),w.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==W.CONNECTING)return;if(w=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void V(e,r,"Invalid Upgrade header");const o=d("sha1").update(m+_).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void V(e,r,"Invalid Sec-WebSocket-Accept header");const s=t.headers["sec-websocket-protocol"];let a;if(void 0!==s?y.size?y.has(s)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":y.size&&(a="Server sent no subprotocol"),a)return void V(e,r,a);s&&(e._protocol=s);const l=t.headers["sec-websocket-extensions"];if(void 0!==l){if(!v){return void V(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=N(l)}catch(t){return void V(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==g.extensionName){return void V(e,r,"Server indicated an extension that was not requested")}try{v.accept(t[g.extensionName])}catch(t){return void V(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[g.extensionName]=v}e.setSocket(r,n,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})})),i.finishRequest?i.finishRequest(w,e):w.end()}function G(e,t){e._readyState=W.CLOSING,e.emit("error",t),e.emitClose()}function z(e){return e.path=e.socketPath,c.connect(e)}function H(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=c.isIP(e.host)?"":e.host),f.connect(e)}function V(e,t,r){e._readyState=W.CLOSING;const n=new Error(r);Error.captureStackTrace(n,V),t.setHeader?(t[L]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(G,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function Y(e,t,r){if(t){const r=C(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${I[e.readyState]})`);process.nextTick(r,t)}}function J(e,t){const r=this[x];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[x]&&(r._socket.removeListener("data",ae),process.nextTick(oe,r._socket),1005===e?r.close():r.close(e,t))}function Z(){const e=this[x];e.isPaused||e._socket.resume()}function K(e){const t=this[x];void 0!==t._socket[x]&&(t._socket.removeListener("data",ae),process.nextTick(oe,t._socket),t.close(e[E])),t.emit("error",e)}function te(){this[x].emitClose()}function re(e,t){this[x].emit("message",e,t)}function ne(e){const t=this[x];t._autoPong&&t.pong(e,!this._isServer,k),t.emit("ping",e)}function ie(e){this[x].emit("pong",e)}function oe(e){e.resume()}function se(){const e=this[x];let t;this.removeListener("close",se),this.removeListener("data",ae),this.removeListener("end",le),e._readyState=W.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[x]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",te),e._receiver.on("finish",te))}function ae(e){this[x]._receiver.write(e)||this.pause()}function le(){const e=this[x];e._readyState=W.CLOSING,e._receiver.end(),this.end()}function ue(){const e=this[x];this.removeListener("error",ue),this.on("error",k),e&&(e._readyState=W.CLOSING,this.destroy())}return Object.defineProperty(W,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(W.prototype,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(W,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(W.prototype,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(W,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(W.prototype,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(W,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),Object.defineProperty(W.prototype,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(W.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(W.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[w])return t[S];return null},set(t){for(const t of this.listeners(e))if(t[w]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[w]:!0})}})})),W.prototype.addEventListener=O,W.prototype.removeEventListener=M,F=W}function re(){if(z)return G;z=1;const{tokenChars:e}=K();return G={parse:function(t){const r=new Set;let n=-1,i=-1,o=0;for(;o<t.length;o++){const s=t.charCodeAt(o);if(-1===i&&1===e[s])-1===n&&(n=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===n)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const e=t.slice(n,i);if(r.has(e))throw new SyntaxError(`The "${e}" subprotocol is duplicated`);r.add(e),n=i=-1}}else-1===i&&-1!==n&&(i=o)}if(-1===n||-1!==i)throw new SyntaxError("Unexpected end of input");const s=t.slice(n,o);if(r.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return r.add(s),r}}}function ne(){if(V)return H;V=1;const t=e,n=r,{createHash:i}=o,s=ee(),a=R(),l=re(),u=te(),{GUID:c,kWebSocket:f}=j(),h=/^[+/0-9A-Za-z]{22}==$/;function d(e){e._state=2,e.emit("close")}function p(){this.destroy()}function g(e,t,r,i){r=r||n.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(i).map((e=>`${e}: ${i[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function m(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,m),e.emit("wsClientError",n,r,t)}else g(r,n,i)}return H=class extends t{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer(((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(d,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(d,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{d(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",p);const i=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if("GET"!==e.method){return void m(this,e,t,405,"Invalid HTTP method")}if("websocket"!==e.headers.upgrade.toLowerCase()){return void m(this,e,t,400,"Invalid Upgrade header")}if(!i||!h.test(i)){return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header")}if(8!==o&&13!==o){return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header")}if(!this.shouldHandle(e))return void g(t,400);const u=e.headers["sec-websocket-protocol"];let c=new Set;if(void 0!==u)try{c=l.parse(u)}catch(r){return void m(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const f=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&void 0!==f){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=s.parse(f);e[a.extensionName]&&(r.accept(e[a.extensionName]),d[a.extensionName]=r)}catch(r){return void m(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const s={origin:e.headers[""+(8===o?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,((o,s,a,l)=>{if(!o)return g(t,s||401,a,l);this.completeUpgrade(d,i,c,e,t,r,n)}));if(!this.options.verifyClient(s))return g(t,401)}this.completeUpgrade(d,i,c,e,t,r,n)}completeUpgrade(e,t,r,n,o,l,u){if(!o.readable||!o.writable)return o.destroy();if(o[f])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(o,503);const h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+c).digest("base64")}`],m=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(h.push(`Sec-WebSocket-Protocol: ${e}`),m._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,r=s.format({[a.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${r}`),m._extensions=e}this.emit("headers",h,n),o.write(h.concat("\r\n").join("\r\n")),o.removeListener("error",p),m.setSocket(o,l,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(m),m.on("close",(()=>{this.clients.delete(m),this._shouldEmitClose&&!this.clients.size&&process.nextTick(d,this)}))),u(m,n)}},H}function ie(){if(J)return Y;J=1;const e=te();return e.createWebSocketStream=function(){if(q)return W;q=1;const{Duplex:e}=s;function t(e){e.emit("close")}function r(){!this.destroyed&&this._writableState.finished&&this.destroy()}function n(e){this.removeListener("error",n),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}return W=function(i,o){let s=!0;const a=new e({...o,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return i.on("message",(function(e,t){const r=!t&&a._readableState.objectMode?e.toString():e;a.push(r)||i.pause()})),i.once("error",(function(e){a.destroyed||(s=!1,a.destroy(e))})),i.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(e,r){if(i.readyState===i.CLOSED)return r(e),void process.nextTick(t,a);let n=!1;i.once("error",(function(e){n=!0,r(e)})),i.once("close",(function(){n||r(e),process.nextTick(t,a)})),s&&i.terminate()},a._final=function(e){i.readyState!==i.CONNECTING?null!==i._socket&&(i._socket._writableState.finished?(e(),a._readableState.endEmitted&&a.destroy()):(i._socket.once("finish",(function(){e()})),i.close())):i.once("open",(function(){a._final(e)}))},a._read=function(){i.isPaused&&i.resume()},a._write=function(e,t,r){i.readyState!==i.CONNECTING?i.send(e,r):i.once("open",(function(){a._write(e,t,r)}))},a.on("end",r),a.on("error",n),a},W}(),e.Server=ne(),e.Receiver=X(),e.Sender=Q(),e.WebSocket=e,e.WebSocketServer=e.Server,Y=e}var oe,se={},ae={};var le,ue={};var ce,fe,he,de={},pe={},ge={};function me(){if(fe)return pe;fe=1,Object.defineProperty(pe,"__esModule",{value:!0});const e=(ce||(ce=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),ge);return pe.default=function(t){return"string"==typeof t&&e.default.test(t)},pe}function be(){if(he)return de;he=1,Object.defineProperty(de,"__esModule",{value:!0});const e=me();return de.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");let r;return Uint8Array.of((r=parseInt(t.slice(0,8),16))>>>24,r>>>16&255,r>>>8&255,255&r,(r=parseInt(t.slice(9,13),16))>>>8,255&r,(r=parseInt(t.slice(14,18),16))>>>8,255&r,(r=parseInt(t.slice(19,23),16))>>>8,255&r,(r=parseInt(t.slice(24,36),16))/1099511627776&255,r/4294967296&255,r>>>24&255,r>>>16&255,r>>>8&255,255&r)},de}var ye,ve={};function _e(){if(ye)return ve;ye=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.unsafeStringify=r;const e=me(),t=[];for(let e=0;e<256;++e)t.push((e+256).toString(16).slice(1));function r(e,r=0){return(t[e[r+0]]+t[e[r+1]]+t[e[r+2]]+t[e[r+3]]+"-"+t[e[r+4]]+t[e[r+5]]+"-"+t[e[r+6]]+t[e[r+7]]+"-"+t[e[r+8]]+t[e[r+9]]+"-"+t[e[r+10]]+t[e[r+11]]+t[e[r+12]]+t[e[r+13]]+t[e[r+14]]+t[e[r+15]]).toLowerCase()}return ve.default=function(t,n=0){const i=r(t,n);if(!(0,e.default)(i))throw TypeError("Stringified UUID is invalid");return i},ve}var we,Se,Ee={},xe={};function ke(){if(we)return xe;we=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=function(){r>t.length-16&&((0,e.randomFillSync)(t),r=0);return t.slice(r,r+=16)};const e=o,t=new Uint8Array(256);let r=t.length;return xe}function Oe(){if(Se)return Ee;Se=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.updateV1State=n;const e=ke(),t=_e(),r={};function n(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=16383&(r[8]<<8|r[9])),e.msecs=t,e}function i(e,t,r,n,i,o,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(o){if(s<0||s+16>o.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`)}else o=new Uint8Array(16),s=0;t??=Date.now(),r??=0,n??=16383&(e[8]<<8|e[9]),i??=e.slice(10,16);const a=(1e4*(268435455&(t+=122192928e5))+r)%4294967296;o[s++]=a>>>24&255,o[s++]=a>>>16&255,o[s++]=a>>>8&255,o[s++]=255&a;const l=t/4294967296*1e4&268435455;o[s++]=l>>>8&255,o[s++]=255&l,o[s++]=l>>>24&15|16,o[s++]=l>>>16&255,o[s++]=n>>>8|128,o[s++]=255&n;for(let e=0;e<6;++e)o[s++]=i[e];return o}return Ee.default=function(o,s,a){let l;const u=o?._v6??!1;if(o){const e=Object.keys(o);1===e.length&&"_v6"===e[0]&&(o=void 0)}if(o)l=i(o.random??o.rng?.()??(0,e.default)(),o.msecs,o.nsecs,o.clockseq,o.node,s,a);else{const t=Date.now(),o=(0,e.default)();n(r,t,o),l=i(o,r.msecs,r.nsecs,u?void 0:r.clockseq,u?void 0:r.node,s,a)}return s?l:(0,t.unsafeStringify)(l)},Ee}var Me,je={};function Te(){if(Me)return je;Me=1,Object.defineProperty(je,"__esModule",{value:!0}),je.default=function(r){const n=function(e){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof r?(0,e.default)(r):r);return"string"==typeof r?(0,t.unsafeStringify)(n):n};const e=be(),t=_e();return je}var Re,Pe={},Ne={};var Ce,Le,Ae={};function De(){if(Ce)return Ae;Ce=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.URL=Ae.DNS=void 0,Ae.stringToBytes=r,Ae.default=function(n,i,o,s,a,l){const u="string"==typeof o?r(o):o,c="string"==typeof s?(0,e.default)(s):s;"string"==typeof s&&(s=(0,e.default)(s));if(16!==s?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+u.length);if(f.set(c),f.set(u,c.length),f=i(f),f[6]=15&f[6]|n,f[8]=63&f[8]|128,a){l=l||0;for(let e=0;e<16;++e)a[l+e]=f[e];return a}return(0,t.unsafeStringify)(f)};const e=be(),t=_e();function r(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}return Ae.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ae.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",Ae}function $e(){return Le||(Le=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=function(){if(Re)return Ne;Re=1,Object.defineProperty(Ne,"__esModule",{value:!0});const e=o;return Ne.default=function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),(0,e.createHash)("md5").update(t).digest()},Ne}(),r=De();var n=De();function i(e,n,i,o){return(0,r.default)(48,t.default,e,n,i,o)}Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}}),i.DNS=r.DNS,i.URL=r.URL,e.default=i}(Pe)),Pe}var Ie,Ue,Fe={},Be={};function We(){if(Ue)return Fe;Ue=1,Object.defineProperty(Fe,"__esModule",{value:!0});const e=function(){if(Ie)return Be;Ie=1,Object.defineProperty(Be,"__esModule",{value:!0});const e=o;return Be.default={randomUUID:e.randomUUID},Be}(),t=ke(),r=_e();return Fe.default=function(n,i,o){if(e.default.randomUUID&&!i&&!n)return e.default.randomUUID();const s=(n=n||{}).random??n.rng?.()??(0,t.default)();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,i){if((o=o||0)<0||o+16>i.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)i[o+e]=s[e];return i}return(0,r.unsafeStringify)(s)},Fe}var qe,Ge,ze={},He={};function Ve(){return Ge||(Ge=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=function(){if(qe)return He;qe=1,Object.defineProperty(He,"__esModule",{value:!0});const e=o;return He.default=function(t){return Array.isArray(t)?t=Buffer.from(t):"string"==typeof t&&(t=Buffer.from(t,"utf8")),(0,e.createHash)("sha1").update(t).digest()},He}(),r=De();var n=De();function i(e,n,i,o){return(0,r.default)(80,t.default,e,n,i,o)}Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}}),i.DNS=r.DNS,i.URL=r.URL,e.default=i}(ze)),ze}var Ye,Je={};var Ze,Ke={};function Xe(){if(Ze)return Ke;Ze=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.default=function(r){const n=function(e){return Uint8Array.of((15&e[3])<<4|e[4]>>4&15,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|15&e[6],e[7],(15&e[1])<<4|(240&e[2])>>4,(15&e[2])<<4|(240&e[3])>>4,16|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof r?(0,e.default)(r):r);return"string"==typeof r?(0,t.unsafeStringify)(n):n};const e=be(),t=_e();return Ke}var Qe,et={};var tt,rt,nt,it,ot={};function st(){return rt||(rt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.validate=e.v7=e.v6ToV1=e.v6=e.v5=e.v4=e.v3=e.v1ToV6=e.v1=e.stringify=e.parse=e.NIL=e.MAX=void 0;var t=(oe||(oe=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),ae);Object.defineProperty(e,"MAX",{enumerable:!0,get:function(){return t.default}});var r=(le||(le=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.default="00000000-0000-0000-0000-000000000000"),ue);Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return r.default}});var n=be();Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.default}});var i=_e();Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return i.default}});var o=Oe();Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return o.default}});var s=Te();Object.defineProperty(e,"v1ToV6",{enumerable:!0,get:function(){return s.default}});var a=$e();Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return a.default}});var l=We();Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return l.default}});var u=Ve();Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return u.default}});var c=function(){if(Ye)return Je;Ye=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=_e(),t=Oe(),r=Te();return Je.default=function(n,i,o){n??={},o??=0;let s=(0,t.default)({...n,_v6:!0},new Uint8Array(16));if(s=(0,r.default)(s),i){for(let e=0;e<16;e++)i[o+e]=s[e];return i}return(0,e.unsafeStringify)(s)},Je}();Object.defineProperty(e,"v6",{enumerable:!0,get:function(){return c.default}});var f=Xe();Object.defineProperty(e,"v6ToV1",{enumerable:!0,get:function(){return f.default}});var h=function(){if(Qe)return et;Qe=1,Object.defineProperty(et,"__esModule",{value:!0}),et.updateV7State=n;const e=ke(),t=_e(),r={};function n(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function i(e,t,r,n,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else n=new Uint8Array(16),i=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[i++]=t/1099511627776&255,n[i++]=t/4294967296&255,n[i++]=t/16777216&255,n[i++]=t/65536&255,n[i++]=t/256&255,n[i++]=255&t,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|3&e[10],n[i++]=e[11],n[i++]=e[12],n[i++]=e[13],n[i++]=e[14],n[i++]=e[15],n}return et.default=function(o,s,a){let l;if(o)l=i(o.random??o.rng?.()??(0,e.default)(),o.msecs,o.seq,s,a);else{const t=Date.now(),o=(0,e.default)();n(r,t,o),l=i(o,r.msecs,r.seq,s,a)}return s?l:(0,t.unsafeStringify)(l)},et}();Object.defineProperty(e,"v7",{enumerable:!0,get:function(){return h.default}});var d=me();Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return d.default}});var p=function(){if(tt)return ot;tt=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=me();return ot.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)},ot}();Object.defineProperty(e,"version",{enumerable:!0,get:function(){return p.default}})}(se)),se}var at,lt,ut={},ct={};function ft(){if(lt)return at;lt=1;class e extends Error{constructor(t){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${t.toString().split("\n")[0]}\n`),Error.captureStackTrace(this,e)}}return at=t=>{if(t.length>2)throw new e(t);function r(e={}){this.options=e}function n(e){return new r(e)}return r.prototype.transform=t,n.Format=r,n}}var ht,dt,pt,gt,mt,bt={exports:{}},yt={exports:{}},vt={exports:{}},_t={exports:{}};function wt(){return ht||(ht=1,function(e){var t={};e.exports=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e],i=t[e]=[];i.open="["+n[0]+"m",i.close="["+n[1]+"m"}))}(_t)),_t.exports}function St(){return pt?dt:(pt=1,dt=function(e,t){var r=(t=t||process.argv||[]).indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return-1!==i&&(-1===r||i<r)})}function Et(){if(mt)return gt;mt=1;var e=f,t=St(),r=process.env,n=void 0;function i(i){var o=function(i){if(!1===n)return 0;if(t("color=16m")||t("color=full")||t("color=truecolor"))return 3;if(t("color=256"))return 2;if(i&&!i.isTTY&&!0!==n)return 0;var o=n?1:0;if("win32"===process.platform){var s=e.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in r}))||"codeship"===r.CI_NAME?1:o;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in r){var a=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:(r.TERM,o)}(i);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(o)}return t("no-color")||t("no-colors")||t("color=false")?n=!1:(t("color")||t("colors")||t("color=true")||t("color=always"))&&(n=!0),"FORCE_COLOR"in r&&(n=0===r.FORCE_COLOR.length||0!==parseInt(r.FORCE_COLOR,10)),gt={supportsColor:i,stdout:i(process.stdout),stderr:i(process.stderr)}}var xt,kt={exports:{}};var Ot,Mt={exports:{}};var jt,Tt={exports:{}};var Rt,Pt={exports:{}};var Nt,Ct={exports:{}};var Lt,At,Dt,$t={exports:{}};function It(){return At||(At=1,function(e){var t={};e.exports=t,t.themes={};var r=c,n=t.styles=wt(),i=Object.defineProperties,o=new RegExp(/[\r\n]+/g);t.supportsColor=Et().supportsColor,void 0===t.enabled&&(t.enabled=!1!==t.supportsColor()),t.enable=function(){t.enabled=!0},t.disable=function(){t.enabled=!1},t.stripColors=t.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")},t.stylize=function(e,r){if(!t.enabled)return e+"";var i=n[r];return!i&&r in t?t[r](e):i.open+e+i.close};var s=/[|\\{}()[\]^$+*?.]/g;function a(e){var t=function e(){return h.apply(e,arguments)};return t._styles=e,t.__proto__=f,t}var l,u=(l={},n.grey=n.gray,Object.keys(n).forEach((function(e){n[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(s,"\\$&")}(n[e].close),"g"),l[e]={get:function(){return a(this._styles.concat(e))}}})),l),f=i((function(){}),u);function h(){var e=Array.prototype.slice.call(arguments).map((function(e){return null!=e&&e.constructor===String?e:r.inspect(e)})).join(" ");if(!t.enabled||!e)return e;for(var i=-1!=e.indexOf("\n"),s=this._styles,a=s.length;a--;){var l=n[s[a]];e=l.open+e.replace(l.closeRe,l.open)+l.close,i&&(e=e.replace(o,(function(e){return l.close+e+l.open})))}return e}t.setTheme=function(e){if("string"!=typeof e)for(var r in e)!function(r){t[r]=function(n){if("object"==typeof e[r]){var i=n;for(var o in e[r])i=t[e[r][o]](i);return i}return t[e[r]](n)}}(r);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var d=function(e,t){var r=t.split("");return(r=r.map(e)).join("")};for(var p in t.trap=(xt||(xt=1,kt.exports=function(e,t){var r="";e=(e=e||"Run the trap, drop the bass").split("");var n={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "],i=Math.floor(Math.random()*t.length);r+=void 0!==n[e]?n[e][i]:e})),r}),kt.exports),t.zalgo=Ot?Mt.exports:(Ot=1,Mt.exports=function(e,t){e=e||"   he is here   ";var r={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},n=[].concat(r.up,r.down,r.mid);function i(e){return Math.floor(Math.random()*e)}function o(e){var t=!1;return n.filter((function(r){t=r===e})),t}return function(e,t){var n,s,a="";for(s in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!o(s)){switch(a+=e[s],n={up:0,down:0,mid:0},t.size){case"mini":n.up=i(8),n.mid=i(2),n.down=i(8);break;case"maxi":n.up=i(16)+3,n.mid=i(4)+1,n.down=i(64)+3;break;default:n.up=i(8)+1,n.mid=i(6)/2,n.down=i(8)+1}var l=["up","mid","down"];for(var u in l)for(var c=l[u],f=0;f<=n[c];f++)t[c]&&(a+=r[c][i(r[c].length)])}return a}(e,t)}),t.maps={},t.maps.america=(jt||(jt=1,Tt.exports=function(e){return function(t,r,n){if(" "===t)return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}),Tt.exports)(t),t.maps.zebra=(Rt||(Rt=1,Pt.exports=function(e){return function(t,r,n){return r%2==0?t:e.inverse(t)}}),Pt.exports)(t),t.maps.rainbow=(Nt||(Nt=1,Ct.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return" "===r?r:e[t[n++%t.length]](r)}}),Ct.exports)(t),t.maps.random=(Lt||(Lt=1,$t.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return" "===r?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}),$t.exports)(t),t.maps)!function(e){t[e]=function(r){return d(t.maps[e],r)}}(p);i(t,function(){var e={};return Object.keys(u).forEach((function(t){e[t]={get:function(){return a([t])}}})),e}())}(vt)),vt.exports}function Ut(){return Dt||(Dt=1,function(e){var t=It();e.exports=t}(yt)),yt.exports}var Ft,Bt={},Wt={},qt={};var Gt,zt={};var Ht,Vt,Yt,Jt,Zt,Kt,Xt,Qt,er,tr,rr={};function nr(){return Vt||(Vt=1,e=Wt,Object.defineProperty(e,"cli",{value:(Ft||(Ft=1,qt.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},qt.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}),qt)}),Object.defineProperty(e,"npm",{value:(Gt||(Gt=1,zt.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},zt.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}),zt)}),Object.defineProperty(e,"syslog",{value:(Ht||(Ht=1,rr.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},rr.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}),rr)})),Wt;var e}function ir(){return Yt||(Yt=1,e=Bt,Object.defineProperty(e,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(e,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(e,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(e,"configs",{value:nr()})),Bt;var e}function or(){if(Jt)return bt.exports;Jt=1;const e=Ut(),{LEVEL:t,MESSAGE:r}=ir();e.enabled=!0;const n=/\s+/;class i{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){const t=Object.keys(e).reduce(((t,r)=>(t[r]=n.test(e[r])?e[r].split(n):e[r],t)),{});return i.allColors=Object.assign({},i.allColors||{},t),i.allColors}addColors(e){return i.addColors(e)}colorize(t,r,n){if(void 0===n&&(n=r),!Array.isArray(i.allColors[t]))return e[i.allColors[t]](n);for(let r=0,o=i.allColors[t].length;r<o;r++)n=e[i.allColors[t][r]](n);return n}transform(e,n){return n.all&&"string"==typeof e[r]&&(e[r]=this.colorize(e[t],e.level,e[r])),(n.level||n.all||!n.message)&&(e.level=this.colorize(e[t],e.level)),(n.all||n.message)&&(e.message=this.colorize(e[t],e.level,e.message)),e}}return bt.exports=e=>new i(e),bt.exports.Colorizer=bt.exports.Format=i,bt.exports}var sr,ar,lr={exports:{}},ur={exports:{}};function cr(){if(sr)return ur.exports;sr=1;const{configs:e,LEVEL:t,MESSAGE:r}=ir();class n{constructor(t={levels:e.npm.levels}){this.paddings=n.paddingForLevels(t.levels,t.filler),this.options=t}static getLongestLevel(e){const t=Object.keys(e).map((e=>e.length));return Math.max(...t)}static paddingForLevel(e,t,r){const n=r+1-e.length,i=Math.floor(n/t.length);return`${t}${t.repeat(i)}`.slice(0,n)}static paddingForLevels(e,t=" "){const r=n.getLongestLevel(e);return Object.keys(e).reduce(((e,i)=>(e[i]=n.paddingForLevel(i,t,r),e)),{})}transform(e,n){return e.message=`${this.paddings[e[t]]}${e.message}`,e[r]&&(e[r]=`${this.paddings[e[t]]}${e[r]}`),e}}return ur.exports=e=>new n(e),ur.exports.Padder=ur.exports.Format=n,ur.exports}var fr,hr={exports:{}};var dr,pr,gr,mr,br,yr,vr,_r,wr,Sr,Er,xr,kr,Or,Mr,jr={exports:{}};function Tr(){return dr||(dr=1,function(e,t){const{hasOwnProperty:r}=Object.prototype,n=h();n.configure=h,n.stringify=n,n.default=n,t.stringify=n,t.configure=h,e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function o(e){return e.length<5e3&&!i.test(e)?`"${e}"`:JSON.stringify(e)}function s(e,t){if(e.length>200||t)return e.sort(t);for(let t=1;t<e.length;t++){const r=e[t];let n=t;for(;0!==n&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(e){return void 0!==a.call(e)&&0!==e.length}function u(e,t,r){e.length<r&&(r=e.length);const n=","===t?"":" ";let i=`"0":${n}${e[0]}`;for(let o=1;o<r;o++)i+=`${t}"${o}":${n}${e[o]}`;return i}function c(e,t){let n;if(r.call(e,t)){if(n=e[t],"number"!=typeof n)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(n))throw new TypeError(`The "${t}" argument must be an integer`);if(n<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return void 0===n?1/0:n}function f(e){return 1===e?"1 item":`${e} items`}function h(e){const t=function(e){if(r.call(e,"strict")){const t=e.strict;if("boolean"!=typeof t)throw new TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t="Object can not safely be stringified. Received type "+typeof e;throw"function"!=typeof e&&(t+=` (${e.toString()})`),new Error(t)}}}(e={...e});t&&(void 0===e.bigint&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));const n=function(e){if(r.call(e,"circularValue")){const t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),i=function(e,t){let n;if(r.call(e,t)&&(n=e[t],"boolean"!=typeof n))throw new TypeError(`The "${t}" argument must be of type boolean`);return void 0===n||n}(e,"bigint"),a=function(e){let t;if(r.call(e,"deterministic")&&(t=e.deterministic,"boolean"!=typeof t&&"function"!=typeof t))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return void 0===t||t}(e),h="function"==typeof a?a:void 0,d=c(e,"maximumDepth"),p=c(e,"maximumBreadth");function g(e,r,u,c,m,b){let y=r[e];switch("object"==typeof y&&null!==y&&"function"==typeof y.toJSON&&(y=y.toJSON(e)),y=c.call(r,e,y),typeof y){case"string":return o(y);case"object":{if(null===y)return"null";if(-1!==u.indexOf(y))return n;let e="",t=",";const r=b;if(Array.isArray(y)){if(0===y.length)return"[]";if(d<u.length+1)return'"[Array]"';u.push(y),""!==m&&(e+=`\n${b+=m}`,t=`,\n${b}`);const n=Math.min(y.length,p);let i=0;for(;i<n-1;i++){const r=g(String(i),y,u,c,m,b);e+=void 0!==r?r:"null",e+=t}const o=g(String(i),y,u,c,m,b);if(e+=void 0!==o?o:"null",y.length-1>p){e+=`${t}"... ${f(y.length-p-1)} not stringified"`}return""!==m&&(e+=`\n${r}`),u.pop(),`[${e}]`}let i=Object.keys(y);const v=i.length;if(0===v)return"{}";if(d<u.length+1)return'"[Object]"';let _="",w="";""!==m&&(t=`,\n${b+=m}`,_=" ");const S=Math.min(v,p);a&&!l(y)&&(i=s(i,h)),u.push(y);for(let r=0;r<S;r++){const n=i[r],s=g(n,y,u,c,m,b);void 0!==s&&(e+=`${w}${o(n)}:${_}${s}`,w=t)}if(v>p){e+=`${w}"...":${_}"${f(v-p)} not stringified"`,w=t}return""!==m&&w.length>1&&(e=`\n${b}${e}\n${r}`),u.pop(),`{${e}}`}case"number":return isFinite(y)?String(y):t?t(y):"null";case"boolean":return!0===y?"true":"false";case"undefined":return;case"bigint":if(i)return String(y);default:return t?t(y):void 0}}function m(e,r,s,a,l,u){switch("object"==typeof r&&null!==r&&"function"==typeof r.toJSON&&(r=r.toJSON(e)),typeof r){case"string":return o(r);case"object":{if(null===r)return"null";if(-1!==s.indexOf(r))return n;const e=u;let t="",i=",";if(Array.isArray(r)){if(0===r.length)return"[]";if(d<s.length+1)return'"[Array]"';s.push(r),""!==l&&(t+=`\n${u+=l}`,i=`,\n${u}`);const n=Math.min(r.length,p);let o=0;for(;o<n-1;o++){const e=m(String(o),r[o],s,a,l,u);t+=void 0!==e?e:"null",t+=i}const c=m(String(o),r[o],s,a,l,u);if(t+=void 0!==c?c:"null",r.length-1>p){t+=`${i}"... ${f(r.length-p-1)} not stringified"`}return""!==l&&(t+=`\n${e}`),s.pop(),`[${t}]`}s.push(r);let c="";""!==l&&(i=`,\n${u+=l}`,c=" ");let h="";for(const e of a){const n=m(e,r[e],s,a,l,u);void 0!==n&&(t+=`${h}${o(e)}:${c}${n}`,h=i)}return""!==l&&h.length>1&&(t=`\n${u}${t}\n${e}`),s.pop(),`{${t}}`}case"number":return isFinite(r)?String(r):t?t(r):"null";case"boolean":return!0===r?"true":"false";case"undefined":return;case"bigint":if(i)return String(r);default:return t?t(r):void 0}}function b(e,r,c,g,m){switch(typeof r){case"string":return o(r);case"object":{if(null===r)return"null";if("function"==typeof r.toJSON){if("object"!=typeof(r=r.toJSON(e)))return b(e,r,c,g,m);if(null===r)return"null"}if(-1!==c.indexOf(r))return n;const t=m;if(Array.isArray(r)){if(0===r.length)return"[]";if(d<c.length+1)return'"[Array]"';c.push(r);let e=`\n${m+=g}`;const n=`,\n${m}`,i=Math.min(r.length,p);let o=0;for(;o<i-1;o++){const t=b(String(o),r[o],c,g,m);e+=void 0!==t?t:"null",e+=n}const s=b(String(o),r[o],c,g,m);if(e+=void 0!==s?s:"null",r.length-1>p){e+=`${n}"... ${f(r.length-p-1)} not stringified"`}return e+=`\n${t}`,c.pop(),`[${e}]`}let i=Object.keys(r);const y=i.length;if(0===y)return"{}";if(d<c.length+1)return'"[Object]"';const v=`,\n${m+=g}`;let _="",w="",S=Math.min(y,p);l(r)&&(_+=u(r,v,p),i=i.slice(r.length),S-=r.length,w=v),a&&(i=s(i,h)),c.push(r);for(let e=0;e<S;e++){const t=i[e],n=b(t,r[t],c,g,m);void 0!==n&&(_+=`${w}${o(t)}: ${n}`,w=v)}if(y>p){_+=`${w}"...": "${f(y-p)} not stringified"`,w=v}return""!==w&&(_=`\n${m}${_}\n${t}`),c.pop(),`{${_}}`}case"number":return isFinite(r)?String(r):t?t(r):"null";case"boolean":return!0===r?"true":"false";case"undefined":return;case"bigint":if(i)return String(r);default:return t?t(r):void 0}}function y(e,r,c){switch(typeof r){case"string":return o(r);case"object":{if(null===r)return"null";if("function"==typeof r.toJSON){if("object"!=typeof(r=r.toJSON(e)))return y(e,r,c);if(null===r)return"null"}if(-1!==c.indexOf(r))return n;let t="";const i=void 0!==r.length;if(i&&Array.isArray(r)){if(0===r.length)return"[]";if(d<c.length+1)return'"[Array]"';c.push(r);const e=Math.min(r.length,p);let n=0;for(;n<e-1;n++){const e=y(String(n),r[n],c);t+=void 0!==e?e:"null",t+=","}const i=y(String(n),r[n],c);if(t+=void 0!==i?i:"null",r.length-1>p){t+=`,"... ${f(r.length-p-1)} not stringified"`}return c.pop(),`[${t}]`}let g=Object.keys(r);const m=g.length;if(0===m)return"{}";if(d<c.length+1)return'"[Object]"';let b="",v=Math.min(m,p);i&&l(r)&&(t+=u(r,",",p),g=g.slice(r.length),v-=r.length,b=","),a&&(g=s(g,h)),c.push(r);for(let e=0;e<v;e++){const n=g[e],i=y(n,r[n],c);void 0!==i&&(t+=`${b}${o(n)}:${i}`,b=",")}if(m>p){t+=`${b}"...":"${f(m-p)} not stringified"`}return c.pop(),`{${t}}`}case"number":return isFinite(r)?String(r):t?t(r):"null";case"boolean":return!0===r?"true":"false";case"undefined":return;case"bigint":if(i)return String(r);default:return t?t(r):void 0}}return function(e,t,r){if(arguments.length>1){let n="";if("number"==typeof r?n=" ".repeat(Math.min(r,10)):"string"==typeof r&&(n=r.slice(0,10)),null!=t){if("function"==typeof t)return g("",{"":e},[],t,n,"");if(Array.isArray(t))return m("",e,[],function(e){const t=new Set;for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(String(r));return t}(t),n,"")}if(0!==n.length)return b("",e,[],n,"")}return y("",e,[])}}}(jr,jr.exports)),jr.exports}function Rr(){if(gr)return pr;gr=1;const e=ft(),{MESSAGE:t}=ir(),r=Tr();function n(e,t){return"bigint"==typeof t?t.toString():t}return pr=e(((e,i)=>{const o=r.configure(i);return e[t]=o(e,i.replacer||n,i.space),e}))}function Pr(){if(wr)return _r;wr=1;const e=ft();return _r=e(((e,t={})=>{let r="metadata";t.key&&(r=t.key);let n=[];return t.fillExcept||t.fillWith||(n.push("level"),n.push("message")),t.fillExcept&&(n=t.fillExcept),n.length>0?function(e,t,r){const n=t.reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{}),i=Object.keys(e).reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{});return Object.assign(e,n,{[r]:i}),e}(e,n,r):t.fillWith?function(e,t,r){return e[r]=t.reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{}),e}(e,t.fillWith,r):e}))}function Nr(){if(Er)return Sr;Er=1;var e=1e3,t=60*e,r=60*t,n=24*r,i=7*n,o=365.25*n;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}return Sr=function(a,l){l=l||{};var u=typeof a;if("string"===u&&a.length>0)return function(s){if((s=String(s)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(a);if("number"===u&&isFinite(a))return l.long?function(i){var o=Math.abs(i);if(o>=n)return s(i,o,n,"day");if(o>=r)return s(i,o,r,"hour");if(o>=t)return s(i,o,t,"minute");if(o>=e)return s(i,o,e,"second");return i+" ms"}(a):function(i){var o=Math.abs(i);if(o>=n)return Math.round(i/n)+"d";if(o>=r)return Math.round(i/r)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}var Cr,Lr,Ar,Dr,$r,Ir={exports:{}};var Ur=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Fr="\\d\\d?",Br="\\d\\d",Wr="[^\\s]+",qr=/\[([^]*?)\]/gm;function Gr(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r.push(e[n].substr(0,t));return r}var zr=function(e){return function(t,r){var n=r[e].map((function(e){return e.toLowerCase()})),i=n.indexOf(t.toLowerCase());return i>-1?i:null}};function Hr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];for(var s in o)e[s]=o[s]}return e}var Vr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Yr=["January","February","March","April","May","June","July","August","September","October","November","December"],Jr=Gr(Yr,3),Zr={dayNamesShort:Gr(Vr,3),dayNames:Vr,monthNamesShort:Jr,monthNames:Yr,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},Kr=Hr({},Zr),Xr=function(e){return Kr=Hr(Kr,e)},Qr=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},en=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},tn={D:function(e){return String(e.getDate())},DD:function(e){return en(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return en(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return en(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return en(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return en(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return en(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return en(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return en(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return en(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return en(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return en(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+en(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+en(Math.floor(Math.abs(t)/60),2)+":"+en(Math.abs(t)%60,2)}},rn=function(e){return+e-1},nn=[null,Fr],on=[null,Wr],sn=["isPm",Wr,function(e,t){var r=e.toLowerCase();return r===t.amPm[0]?0:r===t.amPm[1]?1:null}],an=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var r=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?r:-r}return 0}],ln={D:["day",Fr],DD:["day",Br],Do:["day",Fr+Wr,function(e){return parseInt(e,10)}],M:["month",Fr,rn],MM:["month",Br,rn],YY:["year",Br,function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour",Fr,void 0,"isPm"],hh:["hour",Br,void 0,"isPm"],H:["hour",Fr],HH:["hour",Br],m:["minute",Fr],mm:["minute",Br],s:["second",Fr],ss:["second",Br],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",Br,function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:nn,dd:nn,ddd:on,dddd:on,MMM:["month",Wr,zr("monthNamesShort")],MMMM:["month",Wr,zr("monthNames")],a:sn,A:sn,ZZ:an,Z:an},un={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},cn=function(e){return Hr(un,e)},fn=function(e,t,r){if(void 0===t&&(t=un.default),void 0===r&&(r={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var n=[];t=(t=un[t]||t).replace(qr,(function(e,t){return n.push(t),"@@@"}));var i=Hr(Hr({},Kr),r);return(t=t.replace(Ur,(function(t){return tn[t](e,i)}))).replace(/@@@/g,(function(){return n.shift()}))};function hn(e,t,r){if(void 0===r&&(r={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=un[t]||t,e.length>1e3)return null;var n={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],s=t.replace(qr,(function(e,t){return o.push(Qr(t)),"@@@"})),a={},l={};s=Qr(s).replace(Ur,(function(e){var t=ln[e],r=t[0],n=t[1],o=t[3];if(a[r])throw new Error("Invalid format. "+r+" specified twice in format");return a[r]=!0,o&&(l[o]=!0),i.push(t),"("+n+")"})),Object.keys(l).forEach((function(e){if(!a[e])throw new Error("Invalid format. "+e+" is required in specified format")})),s=s.replace(/@@@/g,(function(){return o.shift()}));var u=e.match(new RegExp(s,"i"));if(!u)return null;for(var c,f=Hr(Hr({},Kr),r),h=1;h<u.length;h++){var d=i[h-1],p=d[0],g=d[2],m=g?g(u[h],f):+u[h];if(null==m)return null;n[p]=m}if(1===n.isPm&&null!=n.hour&&12!=+n.hour?n.hour=+n.hour+12:0===n.isPm&&12==+n.hour&&(n.hour=0),null==n.timezoneOffset){c=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var b=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,b.length);h<y;h++)if(a[b[h][0]]&&n[b[h][0]]!==c[b[h][1]]())return null}else if(c=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return c}var dn,pn,gn,mn,bn,yn={format:fn,parse:hn,defaultI18n:Zr,setGlobalDateI18n:Xr,setGlobalDateMasks:cn},vn=y(Object.freeze({__proto__:null,assign:Hr,default:yn,defaultI18n:Zr,format:fn,parse:hn,setGlobalDateI18n:Xr,setGlobalDateMasks:cn}));function _n(){if(bn)return ct;bn=1;const e=ct.format=ft();function t(t,r){Object.defineProperty(e,t,{get:()=>r(),configurable:!0})}return ct.levels=function(){if(Kt)return Zt;Kt=1;const{Colorizer:e}=or();return Zt=t=>(e.addColors(t.colors||t),t),Zt}(),t("align",(function(){return function(){if(Qt)return Xt;Qt=1;const e=ft();return Xt=e((e=>(e.message=`\t${e.message}`,e)))}()})),t("errors",(function(){return function(){if(tr)return er;tr=1;const e=ft(),{LEVEL:t,MESSAGE:r}=ir();return er=e(((e,{stack:n,cause:i})=>{if(e instanceof Error){const o=Object.assign({},e,{level:e.level,[t]:e[t]||e.level,message:e.message,[r]:e[r]||e.message});return n&&(o.stack=e.stack),i&&(o.cause=e.cause),o}if(!(e.message instanceof Error))return e;const o=e.message;return Object.assign(e,o),e.message=o.message,e[r]=o.message,n&&(e.stack=o.stack),i&&(e.cause=o.cause),e}))}()})),t("cli",(function(){return function(){if(ar)return lr.exports;ar=1;const{Colorizer:e}=or(),{Padder:t}=cr(),{configs:r,MESSAGE:n}=ir();class i{constructor(n={}){n.levels||(n.levels=r.cli.levels),this.colorizer=new e(n),this.padder=new t(n),this.options=n}transform(e,t){return this.colorizer.transform(this.padder.transform(e,t),t),e[n]=`${e.level}:${e.message}`,e}}return lr.exports=e=>new i(e),lr.exports.Format=i,lr.exports}()})),t("combine",(function(){return function(){if(fr)return hr.exports;fr=1;const e=ft();function t(e){if(e.every(r))return t=>{let r=t;for(let t=0;t<e.length;t++)if(r=e[t].transform(r,e[t].options),!r)return!1;return r}}function r(e){if("function"!=typeof e.transform)throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"));return!0}return hr.exports=(...r)=>{const n=e(t(r)),i=n();return i.Format=n.Format,i},hr.exports.cascade=t,hr.exports}()})),t("colorize",(function(){return or()})),t("json",(function(){return Rr()})),t("label",(function(){return function(){if(br)return mr;br=1;const e=ft();return mr=e(((e,t)=>t.message?(e.message=`[${t.label}] ${e.message}`,e):(e.label=t.label,e)))}()})),t("logstash",(function(){return function(){if(vr)return yr;vr=1;const e=ft(),{MESSAGE:t}=ir(),r=Tr();return yr=e((e=>{const n={};return e.message&&(n["@message"]=e.message,delete e.message),e.timestamp&&(n["@timestamp"]=e.timestamp,delete e.timestamp),n["@fields"]=e,e[t]=r(n),e}))}()})),t("metadata",(function(){return Pr()})),t("ms",(function(){return function(){if(kr)return xr;kr=1;const e=ft(),t=Nr();return xr=e((e=>{const r=+new Date;return this.diff=r-(this.prevTime||r),this.prevTime=r,e.ms=`+${t(this.diff)}`,e}))}()})),t("padLevels",(function(){return cr()})),t("prettyPrint",(function(){return function(){if(Mr)return Or;Mr=1;const e=c.inspect,t=ft(),{LEVEL:r,MESSAGE:n,SPLAT:i}=ir();return Or=t(((t,o={})=>{const s=Object.assign({},t);return delete s[r],delete s[n],delete s[i],t[n]=e(s,!1,o.depth||null,o.colorize),t}))}()})),t("printf",(function(){return function(){if(Cr)return Ir.exports;Cr=1;const{MESSAGE:e}=ir();class t{constructor(e){this.template=e}transform(t){return t[e]=this.template(t),t}}return Ir.exports=e=>new t(e),Ir.exports.Printf=Ir.exports.Format=t,Ir.exports}()})),t("simple",(function(){return function(){if(Ar)return Lr;Ar=1;const e=ft(),{MESSAGE:t}=ir(),r=Tr();return Lr=e((e=>{const n=r(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),i=e.padding&&e.padding[e.level]||"";return e[t]="{}"!==n?`${e.level}:${i} ${e.message} ${n}`:`${e.level}:${i} ${e.message}`,e}))}()})),t("splat",(function(){return function(){if($r)return Dr;$r=1;const e=c,{SPLAT:t}=ir(),r=/%[scdjifoO%]/g,n=/%%/g;class i{constructor(e){this.options=e}_splat(r,i){const o=r.message,s=r[t]||r.splat||[],a=o.match(n),l=a&&a.length||0,u=i.length-l-s.length,c=u<0?s.splice(u,-1*u):[],f=c.length;if(f)for(let e=0;e<f;e++)Object.assign(r,c[e]);return r.message=e.format(o,...s),r}transform(e){const n=e.message,i=e[t]||e.splat;if(!i||!i.length)return e;const o=n&&n.match&&n.match(r);if(!o&&(i||i.length)){const t=i.length>1?i.splice(0):i,r=t.length;if(r)for(let n=0;n<r;n++)Object.assign(e,t[n]);return e}return o?this._splat(e,o):e}}return Dr=e=>new i(e)}()})),t("timestamp",(function(){return function(){if(pn)return dn;pn=1;const e=vn,t=ft();return dn=t(((t,r={})=>(r.format&&(t.timestamp="function"==typeof r.format?r.format():e.format(new Date,r.format)),t.timestamp||(t.timestamp=(new Date).toISOString()),r.alias&&(t[r.alias]=t.timestamp),t)))}()})),t("uncolorize",(function(){return function(){if(mn)return gn;mn=1;const e=Ut(),t=ft(),{MESSAGE:r}=ir();return gn=t(((t,n)=>(!1!==n.level&&(t.level=e.strip(t.level)),!1!==n.message&&(t.message=e.strip(String(t.message))),!1!==n.raw&&t[r]&&(t[r]=e.strip(String(t[r]))),t)))}()})),ct}var wn,Sn={};function En(){return wn||(wn=1,function(e){const{format:t}=c;e.warn={deprecated:e=>()=>{throw new Error(t("{ %s } was removed in winston@3.0.0.",e))},useFormat:e=>()=>{throw new Error([t("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))},forFunctions(t,r,n){n.forEach((n=>{t[n]=e.warn[r](n)}))},forProperties(t,r,n){n.forEach((n=>{const i=e.warn[r](n);Object.defineProperty(t,n,{get:i,set:i})}))}}}(Sn)),Sn}var xn,kn,On,Mn,jn,Tn,Rn="3.17.0",Pn={},Nn={exports:{}},Cn={exports:{}};function Ln(){return Mn?On:(Mn=1,On=s)}function An(){if(Tn)return jn;function e(e,n){r(e,n),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}return Tn=1,jn={destroy:function(n,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,n)):process.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(r){!i&&r?o._writableState?o._writableState.errorEmitted?process.nextTick(t,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,r)):process.nextTick(e,o,r):i?(process.nextTick(t,o),i(r)):process.nextTick(t,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}},jn}var Dn,$n,In,Un={};function Fn(){if(Dn)return Un;Dn=1;const e={};function t(t,r,n){n||(n=Error);class i extends n{constructor(e,t,n){super(function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(e,t,n))}}i.prototype.name=n.name,i.prototype.code=t,e[t]=i}function r(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}return t("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(e,t,n){let i;var o;let s;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s=`The ${e} ${i} ${r(t,"type")}`;else{const n=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s=`The "${e}" ${n} ${i} ${r(t,"type")}`}return s+=". Received type "+typeof n,s}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Un.codes=e,Un}function Bn(){if(In)return $n;In=1;var e=Fn().codes.ERR_INVALID_OPT_VALUE;return $n={getHighWaterMark:function(t,r,n,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(r,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new e(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}}var Wn,qn,Gn,zn,Hn={exports:{}},Vn={exports:{}};function Yn(){if(qn)return Hn.exports;qn=1;try{var e=require("util");if("function"!=typeof e.inherits)throw"";Hn.exports=e.inherits}catch(e){Hn.exports=(Wn||(Wn=1,"function"==typeof Object.create?Vn.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Vn.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),Vn.exports)}return Hn.exports}function Jn(){if(zn)return Gn;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r){return function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}zn=1;var o=u.Buffer,s=c.inspect,a=s&&s.custom||"inspect";return Gn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return n(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0===(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:a,value:function(e,r){return s(this,t(t({},r),{},{depth:0,customInspect:!1}))}}]),e}()}var Zn,Kn,Xn,Qn,ei,ti,ri,ni,ii,oi,si,ai,li,ui,ci,fi={},hi={exports:{}};function di(){if(Kn)return fi;Kn=1;var e=(Zn||(Zn=1,function(e,t){var r=u,n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(hi,hi.exports)),hi.exports).Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var n;switch(this.encoding=function(r){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(r);if("string"!=typeof n&&(e.isEncoding===t||!t(r)))throw new Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=o,this.end=s,n=4;break;case"utf8":this.fillLast=i,n=4;break;case"base64":this.text=a,this.end=l,n=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(n)}function n(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function i(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function a(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}return fi.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var o=n(t[i]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--i<r||-2===o)return 0;if(o=n(t[i]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--i<r||-2===o)return 0;if(o=n(t[i]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},fi}function pi(){if(Qn)return Xn;Qn=1;var e=Fn().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return Xn=function r(n,i,o){if("function"==typeof i)return r(n,null,i);i||(i={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||t);var s=i.readable||!1!==i.readable&&n.readable,a=i.writable||!1!==i.writable&&n.writable,l=function(){n.writable||c()},u=n._writableState&&n._writableState.finished,c=function(){a=!1,u=!0,s||o.call(n)},f=n._readableState&&n._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(n)},d=function(e){o.call(n,e)},p=function(){var t;return s&&!f?(n._readableState&&n._readableState.ended||(t=new e),o.call(n,t)):a&&!u?(n._writableState&&n._writableState.ended||(t=new e),o.call(n,t)):void 0},g=function(){n.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(n)?a&&!n._writableState&&(n.on("end",l),n.on("close",l)):(n.on("complete",c),n.on("abort",p),n.req?g():n.on("request",g)),n.on("end",h),n.on("finish",c),!1!==i.error&&n.on("error",d),n.on("close",p),function(){n.removeListener("complete",c),n.removeListener("abort",p),n.removeListener("request",g),n.req&&n.req.removeListener("finish",c),n.removeListener("end",l),n.removeListener("close",l),n.removeListener("finish",c),n.removeListener("end",h),n.removeListener("error",d),n.removeListener("close",p)}},Xn}function gi(){if(ti)return ei;var e;function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ti=1;var r=pi(),n=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),u=Symbol("stream");function c(e,t){return{value:e,done:t}}function f(e){var t=e[n];if(null!==t){var r=e[u].read();null!==r&&(e[a]=null,e[n]=null,e[i]=null,t(c(r,!1)))}}function h(e){process.nextTick(f,e)}var d=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((t(e={get stream(){return this[u]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[s])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[o]?r(e[o]):t(c(void 0,!0))}))}));var r,n=this[a];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[s]?r(c(void 0,!0)):t[l](r,n)}),n)}}(n,this));else{var i=this[u].read();if(null!==i)return Promise.resolve(c(i,!1));r=new Promise(this[l])}return this[a]=r,r}},Symbol.asyncIterator,(function(){return this})),t(e,"return",(function(){var e=this;return new Promise((function(t,r){e[u].destroy(null,(function(e){e?r(e):t(c(void 0,!0))}))}))})),e),d);return ei=function(e){var f,d=Object.create(p,(t(f={},u,{value:e,writable:!0}),t(f,n,{value:null,writable:!0}),t(f,i,{value:null,writable:!0}),t(f,o,{value:null,writable:!0}),t(f,s,{value:e._readableState.endEmitted,writable:!0}),t(f,l,{value:function(e,t){var r=d[u].read();r?(d[a]=null,d[n]=null,d[i]=null,e(c(r,!1))):(d[n]=e,d[i]=t)},writable:!0}),f));return d[a]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=d[i];return null!==t&&(d[a]=null,d[n]=null,d[i]=null,t(e)),void(d[o]=e)}var r=d[n];null!==r&&(d[a]=null,d[n]=null,d[i]=null,r(c(void 0,!0))),d[s]=!0})),e.on("readable",h.bind(null,d)),d},ei}function mi(){if(ni)return ri;function e(e,t,r,n,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ni=1;var n=Fn().codes.ERR_INVALID_ARG_TYPE;return ri=function(i,o,s){var a;if(o&&"function"==typeof o.next)a=o;else if(o&&o[Symbol.asyncIterator])a=o[Symbol.asyncIterator]();else{if(!o||!o[Symbol.iterator])throw new n("iterable",["Iterable"],o);a=o[Symbol.iterator]()}var l=new i(function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({objectMode:!0},s)),u=!1;function c(){return f.apply(this,arguments)}function f(){var t;return t=function*(){try{var e=yield a.next(),t=e.value;e.done?l.push(null):l.push(yield t)?c():u=!1}catch(e){l.destroy(e)}},f=function(){var r=this,n=arguments;return new Promise((function(i,o){var s=t.apply(r,n);function a(t){e(s,i,o,a,l,"next",t)}function l(t){e(s,i,o,a,l,"throw",t)}a(void 0)}))},f.apply(this,arguments)}return l._read=function(){u||(u=!0,c())},l},ri}function bi(){if(oi)return ii;var t;oi=1,ii=k,k.ReadableState=x,e.EventEmitter;var r=function(e,t){return e.listeners(t).length},n=Ln(),i=u.Buffer,o=(void 0!==m?m:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s,a=c;s=a&&a.debuglog?a.debuglog("stream"):function(){};var l,f,h,d=Jn(),p=An(),g=Bn().getHighWaterMark,b=Fn().codes,y=b.ERR_INVALID_ARG_TYPE,v=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Yn()(k,n);var S=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function x(e,r,n){t=t||yi(),e=e||{},"boolean"!=typeof n&&(n=r instanceof t),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=di().StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function k(e){if(t=t||yi(),!(this instanceof k))return new k(e);var r=this instanceof t;this._readableState=new x(e,this,r),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),n.call(this)}function O(e,t,r,n,a){s("readableAddChunk",t);var l,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(s("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,u);else if(a||(l=function(e,t){var r;n=t,i.isBuffer(n)||n instanceof o||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),l)S(e,l);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),n)u.endEmitted?S(e,new w):M(e,u,t,!0);else if(u.ended)S(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?M(e,u,t,!1):N(e,u)):M(e,u,t,!1)}else n||(u.reading=!1,N(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function M(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),N(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=i.from(e,t),t=""),r=!0),O(this,e,t,!1,r)},k.prototype.unshift=function(e){return O(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){l||(l=di().StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var j=1073741824;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=j?e=j:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(P,e))}function P(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,$(e)}function N(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(s("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){s("readable nexttick read 0"),e.read(0)}function D(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),$(e),t.flowing&&!t.reading&&e.read(0)}function $(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function B(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}return k.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):R(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return s("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",i=!0),t.ended||t.reading?s("reading or ended",i=!1):i&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(r,t))),null===(n=e>0?I(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},k.prototype._read=function(e){S(this,new _("_read()"))},k.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?l:g;function a(t,r){s("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,s("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",l),n.removeListener("end",g),n.removeListener("data",f),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function l(){s("onend"),e.end()}i.endEmitted?process.nextTick(o):n.once("end",o),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,$(e))}}(n);e.on("drain",u);var c=!1;function f(t){s("ondata");var r=e.write(t);s("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!c&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function h(t){s("onerror",t),g(),e.removeListener("error",h),0===r(e,"error")&&S(e,t)}function d(){e.removeListener("finish",p),g()}function p(){s("onfinish"),e.removeListener("close",d),g()}function g(){s("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",p),e.emit("pipe",n),i.flowing||(s("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},k.prototype.on=function(e,t){var r=n.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,s("on readable",i.length,i.reading),i.length?R(this):i.reading||process.nextTick(A,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=n.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(L,this),r},k.prototype.removeAllListeners=function(e){var t=n.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(L,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(D,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(s("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(s("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){s("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=gi()),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=I,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===h&&(h=mi()),h(k,e,t)}),ii}function yi(){if(ai)return si;ai=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};si=s;var t=bi(),r=vi();Yn()(s,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=r.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||process.nextTick(l,this)}function l(e){e.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),si}function vi(){if(ui)return li;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var t;ui=1,li=x,x.WritableState=E;var r={deprecate:kn?xn:(kn=1,xn=c.deprecate)},n=Ln(),i=u.Buffer,o=(void 0!==m?m:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s,a=An(),l=Bn().getHighWaterMark,f=Fn().codes,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,b=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,w=a.errorOrDestroy;function S(){}function E(r,n,i){t=t||yi(),r=r||{},"boolean"!=typeof i&&(i=n instanceof t),this.objectMode=!!r.objectMode,i&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=l(this,r,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===r.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new p;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,w(e,n)):(i(n),e._writableState.errorEmitted=!0,w(e,n),R(e,t))}(e,r,n,t,i);else{var o=j(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||M(e,r),n?process.nextTick(O,e,r,o,i):O(e,r,o,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function x(e){var r=this instanceof(t=t||yi());if(!r&&!s.call(x,this))return new x(e);this._writableState=new E(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function k(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),R(e,t)}function M(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,o=new Array(i),s=r.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,k(t,r,!0,r.length,o,"",s.finish),r.pendingcb++,r.lastBufferedRequest=null,s.next?(r.corkedRequestsFree=s.next,s.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,f=n.callback;if(k(t,r,!1,r.objectMode?1:u.length,u,c,f),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function j(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=j(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}return Yn()(x,n),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===x&&(e&&e._writableState instanceof E)}})):s=function(e){return e instanceof this},x.prototype.pipe=function(){w(this,new g)},x.prototype.write=function(e,t,r){var n,s=this._writableState,a=!1,l=!s.objectMode&&(n=e,i.isBuffer(n)||n instanceof o);return l&&!i.isBuffer(e)&&(e=function(e){return i.from(e)}(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=S),s.ending?function(e,t){var r=new v;w(e,r),process.nextTick(t,r)}(this,r):(l||function(e,t,r,n){var i;return null===r?i=new y:"string"==typeof r||t.objectMode||(i=new h("chunk",["string","Buffer"],r)),!i||(w(e,i),process.nextTick(n,i),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,r,n,o,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=i.from(t,r));return t}(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var l=t.objectMode?1:n.length;t.length+=l;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,l,n,o,s);return u}(this,s,l,e,t,r)),a},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new d("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=a.destroy,x.prototype._undestroy=a.undestroy,x.prototype._destroy=function(e,t){t(e)},li}function _i(){if(ci)return Cn.exports;ci=1;const e=c,t=vi(),{LEVEL:r}=ir(),n=Cn.exports=function(e={}){t.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",(e=>{this.levels=e.levels,this.parent=e})),this.once("unpipe",(e=>{e===this.parent&&(this.parent=null,this.close&&this.close())}))};return e.inherits(n,t),n.prototype._write=function(e,t,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);const i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[r]]){if(e&&!this.format)return this.log(e,n);let t,r;try{r=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!r){if(n(),t)throw t;return}return this.log(r,n)}return this._writableState.sync=!1,n(null)},n.prototype._writev=function(e,t){if(this.logv){const r=e.filter(this._accept,this);return r.length?this.logv(r,t):t(null)}for(let r=0;r<e.length;r++){if(!this._accept(e[r]))continue;if(e[r].chunk&&!this.format){this.log(e[r].chunk,e[r].callback);continue}let n,i;try{i=this.format.transform(Object.assign({},e[r].chunk),this.format.options)}catch(e){n=e}if(n||!i){if(e[r].callback(),n)throw t(null),n}else this.log(i,e[r].callback)}return t(null)},n.prototype._accept=function(e){const t=e.chunk;if(this.silent)return!1;const n=this.level||this.parent&&this.parent.level;return!(!0!==t.exception&&n&&!(this.levels[n]>=this.levels[t[r]])||!this.handleExceptions&&!0===t.exception)},n.prototype._nop=function(){},Cn.exports}var wi,Si,Ei,xi,ki={exports:{}};function Oi(){if(wi)return ki.exports;wi=1;const e=c,{LEVEL:t}=ir(),r=_i(),n=ki.exports=function(e={}){if(r.call(this,e),!e.transport||"function"!=typeof e.transport.log)throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(e){this.emit("error",e,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};return e.inherits(n,r),n.prototype._write=function(e,r,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[t]])&&this.transport.log(e[t],e.message,e,this._nop),n(null)},n.prototype._writev=function(e,r){for(let r=0;r<e.length;r++)this._accept(e[r])&&(this.transport.log(e[r].chunk[t],e[r].chunk.message,e[r].chunk,this._nop),e[r].callback());return r(null)},n.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))},n.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)},ki.exports}function Mi(){return Si||(Si=1,Nn.exports=_i(),Nn.exports.LegacyTransportStream=Oi()),Nn.exports}var ji,Ti={exports:{}},Ri={exports:{}},Pi={exports:{}};function Ni(){return ji||(ji=1,e=Pi,t=Pi.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0},e.exports=t.default),Pi.exports;var e,t}var Ci,Li={},Ai={exports:{}},Di={exports:{}};var $i,Ii,Ui,Fi={};function Bi(){return Ii||(Ii=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,o.isAsync)(e))return function(...t){const r=t.pop();return a(e.apply(this,t),r)};return(0,n.default)((function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}if(n&&"function"==typeof n.then)return a(n,r);r(null,n)}))};var r=function(){return Ci||(Ci=1,e=Di,t=Di.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}},e.exports=t.default),Di.exports;var e,t}(),n=s(r),i=s(function(){if($i)return Fi;$i=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.fallback=i,Fi.wrap=o;var e,t=Fi.hasQueueMicrotask="function"==typeof queueMicrotask&&queueMicrotask,r=Fi.hasSetImmediate="function"==typeof setImmediate&&setImmediate,n=Fi.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function i(e){setTimeout(e,0)}function o(e){return(t,...r)=>e((()=>t(...r)))}return e=t?queueMicrotask:r?setImmediate:n?process.nextTick:i,Fi.default=o(e),Fi}()),o=Wi();function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.then((e=>{l(t,null,e)}),(e=>{l(t,e&&(e instanceof Error||e.message)?e:new Error(e))}))}function l(e,t,r){try{e(t,r)}catch(e){(0,i.default)((e=>{throw e}),e)}}e.exports=t.default}(Ai,Ai.exports)),Ai.exports}function Wi(){if(Ui)return Li;Ui=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.isAsyncIterable=Li.isAsyncGenerator=Li.isAsync=void 0;var e,t=Bi(),r=(e=t)&&e.__esModule?e:{default:e};function n(e){return"AsyncFunction"===e[Symbol.toStringTag]}return Li.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return n(e)?(0,r.default)(e):e},Li.isAsync=n,Li.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},Li.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]},Li}var qi,Gi,zi={exports:{}};function Hi(){return qi||(qi=1,e=zi,t=zi.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t||(t=e.length),!t)throw new Error("arity is undefined");return function(...r){return"function"==typeof r[t-1]?e.apply(this,r):new Promise(((n,i)=>{r[t-1]=(e,...t)=>{if(e)return i(e);n(t.length>1?t:t[0])},e.apply(this,r)}))}},e.exports=t.default),zi.exports;var e,t}var Vi,Yi={exports:{}},Ji={exports:{}},Zi={exports:{}},Ki={exports:{}};function Xi(){return Vi||(Vi=1,e=Ki,t=Ki.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(...t){if(null!==e){var r=e;e=null,r.apply(this,t)}}return Object.assign(t,e),t},e.exports=t.default),Ki.exports;var e,t}var Qi,eo,to={exports:{}},ro={exports:{}};function no(){return eo||(eo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t=(0,i.default)(e);return t?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):(n=e,o=n?Object.keys(n):[],s=-1,a=o.length,function e(){var t=o[++s];return"__proto__"===t?e():s<a?{value:n[t],key:t}:null});var n,o,s,a};var r=o(Ni()),n=function(){return Qi||(Qi=1,e=ro,t=ro.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()},e.exports=t.default),ro.exports;var e,t}(),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}(to,to.exports)),to.exports}var io,oo={exports:{}};function so(){return io||(io=1,e=oo,t=oo.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}},e.exports=t.default),oo.exports;var e,t}var ao,lo,uo,co,fo,ho,po={exports:{}},go={exports:{}};function mo(){return ao||(ao=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={},e.exports=t.default}(go,go.exports)),go.exports}function bo(){return uo||(uo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Xi()),n=u(no()),i=u(so()),o=Wi(),s=(lo||(lo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){let o=!1,s=!1,a=!1,l=0,u=0;function c(){l>=t||a||o||(a=!0,e.next().then((({value:e,done:t})=>{if(!s&&!o){if(a=!1,t)return o=!0,void(l<=0&&i(null));l++,r(e,u,f),u++,c()}})).catch(h))}function f(e,t){if(l-=1,!s)return e?h(e):!1===e?(o=!0,void(s=!0)):t===n.default||o&&l<=0?(o=!0,i(null)):void c()}function h(e){s||(a=!1,o=!0,i(e))}c()};var r,n=(r=mo())&&r.__esModule?r:{default:r};e.exports=t.default}(po,po.exports)),po.exports),a=u(s),l=u(mo());function u(e){return e&&e.__esModule?e:{default:e}}t.default=e=>(t,s,u)=>{if(u=(0,r.default)(u),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return u(null);if((0,o.isAsyncGenerator)(t))return(0,a.default)(t,e,s,u);if((0,o.isAsyncIterable)(t))return(0,a.default)(t[Symbol.asyncIterator](),e,s,u);var c=(0,n.default)(t),f=!1,h=!1,d=0,p=!1;function g(e,t){if(!h)if(d-=1,e)f=!0,u(e);else if(!1===e)f=!0,h=!0;else{if(t===l.default||f&&d<=0)return f=!0,u(null);p||m()}}function m(){for(p=!0;d<e&&!f;){var t=c();if(null===t)return f=!0,void(d<=0&&u(null));d+=1,s(t.value,t.key,(0,i.default)(g))}p=!1}m()},e.exports=t.default}(Zi,Zi.exports)),Zi.exports}function yo(){return co||(co=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(bo()),n=o(Wi()),i=o(Hi());function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t,i,o){return(0,r.default)(t)(e,(0,n.default)(i),o)}),4),e.exports=t.default}(Ji,Ji.exports)),Ji.exports}function vo(){return ho||(ho=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(o.default,e,t)};var r=(Gi||(Gi=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(Ni()),n=o(Wi()),i=o(Hi());function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(((e,t,i)=>{var o=(0,r.default)(t)?[]:{};e(t,((e,t,r)=>{(0,n.default)(e)(((e,...n)=>{n.length<2&&([n]=n),o[t]=n,r(e)}))}),(e=>i(e,o)))}),3),e.exports=t.default}(Ri,Ri.exports)),Ri.exports),n=s(r),i=(fo||(fo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(yo()),n=i(Hi());function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)((function(e,t,n){return(0,r.default)(e,1,t,n)}),3),e.exports=t.default}(Yi,Yi.exports)),Yi.exports),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}(Ti,Ti.exports)),Ti.exports}var _o,wo,So,Eo,xo,ko,Oo,Mo={exports:{}};function jo(){if(wo)return _o;wo=1,_o=a;var e=Fn().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,o=yi();function s(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);o.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(t,r){u(e,t,r)}))}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new i;if(e._transformState.transforming)throw new n;return e.push(null)}return Yn()(a,o),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},a.prototype._transform=function(e,r,n){n(new t("_transform()"))},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},a.prototype._destroy=function(e,t){o.prototype._destroy.call(this,e,(function(e){t(e)}))},_o}function To(){if(ko)return xo;var e;ko=1;var t=Fn().codes,r=t.ERR_MISSING_ARGS,n=t.ERR_STREAM_DESTROYED;function i(e){if(e)throw e}function o(e){e()}function s(e,t){return e.pipe(t)}return xo=function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];var u,c=function(e){return e.length?"function"!=typeof e[e.length-1]?i:e.pop():i}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new r("streams");var f=a.map((function(t,r){var i=r<a.length-1;return function(t,r,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===e&&(e=pi()),e(t,{readable:r,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var a=!1;return function(e){if(!s&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new n("pipe"))}}(t,i,r>0,(function(e){u||(u=e),e&&f.forEach(o),i||(f.forEach(o),c(u))}))}));return a.reduce(s)},xo}function Ro(){return Oo||(Oo=1,e=Mo,t=Mo.exports,r=s,"disable"===process.env.READABLE_STREAM&&r?(e.exports=r.Readable,Object.assign(e.exports,r),e.exports.Stream=r):((t=e.exports=bi()).Stream=r||t,t.Readable=t,t.Writable=vi(),t.Duplex=yi(),t.Transform=jo(),t.PassThrough=function(){if(Eo)return So;Eo=1,So=t;var e=jo();function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return Yn()(t,e),t.prototype._transform=function(e,t,r){r(null,e)},So}(),t.finished=pi(),t.pipeline=To())),Mo.exports;var e,t,r}var Po,No,Co,Lo,Ao={exports:{}};function Do(){if(No)return Po;No=1;var e=[],t=[],r=function(){};function n(t){return!~e.indexOf(t)&&(e.push(t),!0)}function i(e){r=e}function o(t){for(var r=[],n=0;n<e.length;n++)if(e[n].async)r.push(e[n]);else if(e[n](t))return!0;return!!r.length&&new Promise((function(e){Promise.all(r.map((function(e){return e(t)}))).then((function(t){e(t.some(Boolean))}))}))}function s(e){return!~t.indexOf(e)&&(t.push(e),!0)}function a(){r.apply(r,arguments)}function l(e){for(var r=0;r<t.length;r++)e=t[r].apply(t[r],arguments);return e}function u(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}function c(e){return e.enabled=!1,e.modify=s,e.set=i,e.use=n,u((function(){return!1}),e)}function f(e){return e.enabled=!0,e.modify=s,e.set=i,e.use=n,u((function(){var t=Array.prototype.slice.call(arguments,0);return a.call(a,e,l(t,e)),!0}),e)}return Po=function(e){return e.introduce=u,e.enabled=o,e.process=l,e.modify=s,e.write=a,e.nope=c,e.yep=f,e.set=i,e.use=n,e}}var $o,Io,Uo={exports:{}};function Fo(){return Io?$o:(Io=1,$o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]})}var Bo,Wo,qo,Go,zo={exports:{}};function Ho(){return Wo?Bo:(Wo=1,Bo=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))})}function Vo(){if(Go)return Uo.exports;Go=1;var e=Fo(),t=function(){if(qo)return zo.exports;qo=1;var e=Ho(),t=Array.prototype.concat,r=Array.prototype.slice,n=zo.exports=function(n){for(var i=[],o=0,s=n.length;o<s;o++){var a=n[o];e(a)?i=t.call(i,r.call(a)):i.push(a)}return i};return n.wrap=function(e){return function(){return e(n(arguments))}},zo.exports}(),r=Object.hasOwnProperty,n=Object.create(null);for(var i in e)r.call(e,i)&&(n[e[i]]=i);var o=Uo.exports={to:{},get:{}};function s(e,t,r){return Math.min(Math.max(t,e),r)}function a(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}return o.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=o.get.hsl(e),r="hsl";break;case"hwb":t=o.get.hwb(e),r="hwb";break;default:t=o.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},o.get.rgb=function(t){if(!t)return null;var n,i,o,a=[0,0,0,1];if(n=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=n[2],n=n[1],i=0;i<3;i++){var l=2*i;a[i]=parseInt(n.slice(l,l+2),16)}o&&(a[3]=parseInt(o,16)/255)}else if(n=t.match(/^#([a-f0-9]{3,4})$/i)){for(o=(n=n[1])[3],i=0;i<3;i++)a[i]=parseInt(n[i]+n[i],16);o&&(a[3]=parseInt(o+o,16)/255)}else if(n=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(i=0;i<3;i++)a[i]=parseInt(n[i+1],0);n[4]&&(n[5]?a[3]=.01*parseFloat(n[4]):a[3]=parseFloat(n[4]))}else{if(!(n=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(n=t.match(/^(\w+)$/))?"transparent"===n[1]?[0,0,0,0]:r.call(e,n[1])?((a=e[n[1]])[3]=1,a):null:null;for(i=0;i<3;i++)a[i]=Math.round(2.55*parseFloat(n[i+1]));n[4]&&(n[5]?a[3]=.01*parseFloat(n[4]):a[3]=parseFloat(n[4]))}for(i=0;i<3;i++)a[i]=s(a[i],0,255);return a[3]=s(a[3],0,1),a},o.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(r)?1:r,0,1)]}return null},o.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,s(parseFloat(t[2]),0,100),s(parseFloat(t[3]),0,100),s(isNaN(r)?1:r,0,1)]}return null},o.to.hex=function(){var e=t(arguments);return"#"+a(e[0])+a(e[1])+a(e[2])+(e[3]<1?a(Math.round(255*e[3])):"")},o.to.rgb=function(){var e=t(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},o.to.rgb.percent=function(){var e=t(arguments),r=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+r+"%, "+n+"%, "+i+"%)":"rgba("+r+"%, "+n+"%, "+i+"%, "+e[3]+")"},o.to.hsl=function(){var e=t(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},o.to.hwb=function(){var e=t(arguments),r="";return e.length>=4&&1!==e[3]&&(r=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+r+")"},o.to.keyword=function(e){return n[e.slice(0,3)]},Uo.exports}var Yo,Jo,Zo,Ko,Xo,Qo,es,ts,rs,ns,is,os,ss,as,ls,us,cs,fs,hs,ds,ps,gs,ms,bs,ys,vs,_s,ws,Ss,Es,xs,ks,Os,Ms,js,Ts,Rs,Ps={exports:{}};function Ns(){if(Yo)return Ps.exports;Yo=1;var e=Fo(),t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);var n=Ps.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in n)if(n.hasOwnProperty(i)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);var o=n[i].channels,s=n[i].labels;delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:o}),Object.defineProperty(n[i],"labels",{value:s})}return n.rgb.hsl=function(e){var t,r,n=e[0]/255,i=e[1]/255,o=e[2]/255,s=Math.min(n,i,o),a=Math.max(n,i,o),l=a-s;return a===s?t=0:n===a?t=(i-o)/l:i===a?t=2+(o-n)/l:o===a&&(t=4+(n-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=(s+a)/2,[t,100*(a===s?0:r<=.5?l/(a+s):l/(2-a-s)),100*r]},n.rgb.hsv=function(e){var t,r,n,i,o,s=e[0]/255,a=e[1]/255,l=e[2]/255,u=Math.max(s,a,l),c=u-Math.min(s,a,l),f=function(e){return(u-e)/6/c+.5};return 0===c?i=o=0:(o=c/u,t=f(s),r=f(a),n=f(l),s===u?i=n-r:a===u?i=1/3+t-n:l===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},n.rgb.hwb=function(e){var t=e[0],r=e[1],i=e[2];return[n.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,i))),100*(i=1-1/255*Math.max(t,Math.max(r,i)))]},n.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},n.rgb.keyword=function(r){var n=t[r];if(n)return n;var i,o,s,a=1/0;for(var l in e)if(e.hasOwnProperty(l)){var u=e[l],c=(o=r,s=u,Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));c<a&&(a=c,i=l)}return i},n.keyword.rgb=function(t){return e[t]},n.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},n.rgb.lab=function(e){var t=n.rgb.xyz(e),r=t[0],i=t[1],o=t[2];return i/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(r-i),200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},n.hsl.rgb=function(e){var t,r,n,i,o,s=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[o=255*l,o,o];t=2*l-(r=l<.5?l*(1+a):l+a-l*a),i=[0,0,0];for(var u=0;u<3;u++)(n=s+1/3*-(u-1))<0&&n++,n>1&&n--,o=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[u]=255*o;return i},n.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,o=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),100*((n+r)/2)]},n.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,l,s];case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}},n.hsv.hsl=function(e){var t,r,n,i=e[0],o=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return n=(2-o)*s,r=o*a,[i,100*(r=(r/=(t=(2-o)*a)<=1?t:2-t)||0),100*(n/=2)]},n.hwb.rgb=function(e){var t,r,n,i,o,s,a,l=e[0]/360,u=e[1]/100,c=e[2]/100,f=u+c;switch(f>1&&(u/=f,c/=f),n=6*l-(t=Math.floor(6*l)),1&t&&(n=1-n),i=u+n*((r=1-c)-u),t){default:case 6:case 0:o=r,s=i,a=u;break;case 1:o=i,s=r,a=u;break;case 2:o=u,s=r,a=i;break;case 3:o=u,s=i,a=r;break;case 4:o=i,s=u,a=r;break;case 5:o=r,s=u,a=i}return[255*o,255*s,255*a]},n.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},n.xyz.rgb=function(e){var t,r,n,i=e[0]/100,o=e[1]/100,s=e[2]/100;return r=-.9689*i+1.8758*o+.0415*s,n=.0557*i+-.204*o+1.057*s,t=(t=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},n.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},n.lab.xyz=function(e){var t,r,n,i=e[0];t=e[1]/500+(r=(i+16)/116),n=r-e[2]/200;var o=Math.pow(r,3),s=Math.pow(t,3),a=Math.pow(n,3);return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},n.lab.lch=function(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},n.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},n.rgb.ansi16=function(e){var t=e[0],r=e[1],i=e[2],o=1 in arguments?arguments[1]:n.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var s=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===o&&(s+=60),s},n.hsv.ansi16=function(e){return n.rgb.ansi16(n.hsv.rgb(e),e[2])},n.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},n.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},n.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},n.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},n.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},n.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(r,n),i),s=Math.min(Math.min(r,n),i),a=o-s;return t=a<=0?0:o===r?(n-i)/a%6:o===n?2+(i-r)/a:4+(r-n)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},n.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,i=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},n.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},n.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i,o=[0,0,0],s=t%1*6,a=s%1,l=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return i=(1-r)*n,[255*(r*o[0]+i),255*(r*o[1]+i),255*(r*o[2]+i)]},n.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},n.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},n.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},n.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},n.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},n.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},n.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},n.gray.hsl=n.gray.hsv=function(e){return[0,0,e[0]]},n.gray.hwb=function(e){return[0,100,e[0]]},n.gray.cmyk=function(e){return[0,0,0,e[0]]},n.gray.lab=function(e){return[e[0],0,0]},n.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},n.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]},Ps.exports}function Cs(){if(Zo)return Jo;Zo=1;var e=Ns();function t(t){var r=function(){for(var t={},r=Object.keys(e),n=r.length,i=0;i<n;i++)t[r[i]]={distance:-1,parent:null};return t}(),n=[t];for(r[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(e[i]),s=o.length,a=0;a<s;a++){var l=o[a],u=r[l];-1===u.distance&&(u.distance=r[i].distance+1,u.parent=i,n.unshift(l))}return r}function r(e,t){return function(r){return t(e(r))}}function n(t,n){for(var i=[n[t].parent,t],o=e[n[t].parent][t],s=n[t].parent;n[s].parent;)i.unshift(n[s].parent),o=r(e[n[s].parent][s],o),s=n[s].parent;return o.conversion=i,o}return Jo=function(e){for(var r=t(e),i={},o=Object.keys(r),s=o.length,a=0;a<s;a++){var l=o[a];null!==r[l].parent&&(i[l]=n(l,r))}return i}}function Ls(){if(Xo)return Ko;Xo=1;var e=Ns(),t=Cs(),r={};return Object.keys(e).forEach((function(n){r[n]={},Object.defineProperty(r[n],"channels",{value:e[n].channels}),Object.defineProperty(r[n],"labels",{value:e[n].labels});var i=t(n);Object.keys(i).forEach((function(e){var t=i[e];r[n][e]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,i=0;i<n;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(t),r[n][e].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(t)}))})),Ko=r}function As(){if(es)return Qo;es=1;var e=Vo(),t=Ls(),r=[].slice,n=["keyword","gray","hex"],i={};Object.keys(t).forEach((function(e){i[r.call(t[e].labels).sort().join("")]=e}));var o={};function s(a,l){if(!(this instanceof s))return new s(a,l);if(l&&l in n&&(l=null),l&&!(l in t))throw new Error("Unknown model: "+l);var c,f;if(null==a)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(a instanceof s)this.model=a.model,this.color=a.color.slice(),this.valpha=a.valpha;else if("string"==typeof a){var h=e.get(a);if(null===h)throw new Error("Unable to parse color from string: "+a);this.model=h.model,f=t[this.model].channels,this.color=h.value.slice(0,f),this.valpha="number"==typeof h.value[f]?h.value[f]:1}else if(a.length){this.model=l||"rgb",f=t[this.model].channels;var d=r.call(a,0,f);this.color=u(d,f),this.valpha="number"==typeof a[f]?a[f]:1}else if("number"==typeof a)a&=16777215,this.model="rgb",this.color=[a>>16&255,a>>8&255,255&a],this.valpha=1;else{this.valpha=1;var p=Object.keys(a);"alpha"in a&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof a.alpha?a.alpha:0);var g=p.sort().join("");if(!(g in i))throw new Error("Unable to parse color from object: "+JSON.stringify(a));this.model=i[g];var m=t[this.model].labels,b=[];for(c=0;c<m.length;c++)b.push(a[m[c]]);this.color=u(b)}if(o[this.model])for(f=t[this.model].channels,c=0;c<f;c++){var y=o[this.model][c];y&&(this.color[c]=y(this.color[c]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function a(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(o[e]||(o[e]=[]))[t]=r})),e=e[0],function(n){var i;return arguments.length?(r&&(n=r(n)),(i=this[e]()).color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function l(e){return function(t){return Math.max(0,Math.min(e,t))}}function u(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}return s.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var r=this.model in e.to?this:this.rgb(),n=1===(r=r.round("number"==typeof t?t:1)).valpha?r.color:r.color.concat(this.valpha);return e.to[r.model](n)},percentString:function(t){var r=this.rgb().round("number"==typeof t?t:1),n=1===r.valpha?r.color:r.color.concat(this.valpha);return e.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},r=t[this.model].channels,n=t[this.model].labels,i=0;i<r;i++)e[n[i]]=this.color[i];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new s(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new s(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:a("rgb",0,l(255)),green:a("rgb",1,l(255)),blue:a("rgb",2,l(255)),hue:a(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:a("hsl",1,l(100)),lightness:a("hsl",2,l(100)),saturationv:a("hsv",1,l(100)),value:a("hsv",2,l(100)),chroma:a("hcg",1,l(100)),gray:a("hcg",2,l(100)),white:a("hwb",1,l(100)),wblack:a("hwb",2,l(100)),cyan:a("cmyk",0,l(100)),magenta:a("cmyk",1,l(100)),yellow:a("cmyk",2,l(100)),black:a("cmyk",3,l(100)),x:a("xyz",0,l(100)),y:a("xyz",1,l(100)),z:a("xyz",2,l(100)),l:a("lab",0,l(100)),a:a("lab",1),b:a("lab",2),keyword:function(e){return arguments.length?new s(e):t[this.model].keyword(this.color)},hex:function(t){return arguments.length?new s(t):e.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return s.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,o=2*i-1,a=r.alpha()-n.alpha(),l=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,u=1-l;return s.rgb(l*r.red()+u*n.red(),l*r.green()+u*n.green(),l*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}},Object.keys(t).forEach((function(e){if(-1===n.indexOf(e)){var i=t[e].channels;s.prototype[e]=function(){if(this.model===e)return new s(this);if(arguments.length)return new s(arguments,e);var r,n="number"==typeof arguments[i]?i:this.valpha;return new s((r=t[this.model][e].raw(this.color),Array.isArray(r)?r:[r]).concat(n),e)},s[e]=function(t){return"number"==typeof t&&(t=u(r.call(arguments),i)),new s(t,e)}}})),Qo=s}function Ds(){if(is)return ns;is=1;var e=As(),t=(rs||(rs=1,ts=function(e){for(var t=0,r=0;t<e.length;r=e.charCodeAt(t++)+((r<<5)-r));var n=Math.floor(Math.abs(1e4*Math.sin(r)%1*16777216)).toString(16);return"#"+Array(6-n.length+1).join("0")+n}),ts);return ns=function(r,n){var i=r.split(n||":"),o=t(i[0]);if(!i.length)return o;for(var s=0,a=i.length-1;s<a;s++)o=e(o).mix(e(t(i[s+1]))).saturate(1).hex();return o}}function $s(){if(ss)return os;function e(t,r){return r?new e(t).style(r):this instanceof e?void(this.text=t):new e(t)}return ss=1,e.prototype.prefix="[",e.prototype.suffix="m",e.prototype.hex=function(e){3===(e="#"===e[0]?e.substring(1):e).length&&((e=e.split(""))[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var t=e.substring(0,2),r=e.substring(2,4),n=e.substring(4,6);return[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},e.prototype.rgb=function(e,t,r){var n=e/255*5,i=t/255*5,o=r/255*5;return this.ansi(n,i,o)},e.prototype.ansi=function(e,t,r){return 16+36*Math.round(e)+6*Math.round(t)+Math.round(r)},e.prototype.reset=function(){return this.prefix+"39;49"+this.suffix},e.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()},os=e}function Is(){return cs||(cs=1,us=function(e,t){if(!t)return!1;for(var r=t.split(/[\s,]+/),n=0;n<r.length;n++)if("-"!==(t=r[n].replace("*",".*?")).charAt(0)){if(new RegExp("^"+t+"$").test(e))return!0}else if(new RegExp("^"+t.substr(1)+"$").test(e))return!1;return!1}),us}function Us(){if(ps)return ds;ps=1;var e=function(){if(hs)return fs;hs=1;var e=Is();return fs=function(t){return function(r){try{return e(r,t())}catch(e){}return!1}}}();return ds=e((function(){return process.env.DEBUG||process.env.DIAGNOSTICS}))}function Fs(){if(ys)return bs;ys=1;var e=Do(),t=p.isatty(1),r=e((function e(r,n){return(n=n||{}).colors="colors"in n?n.colors:t,n.namespace=r,n.prod=!1,n.dev=!0,e.enabled(r)||n.force||e.force?e.yep(n):e.nope(n)}));return r.modify(function(){if(ls)return as;ls=1;var e=Ds(),t=$s();return as=function(r,n){var i=n.namespace,o=!1!==n.colors?t(i+":",e(i)):i+":";return r[0]=o+" "+r[0],r}}()),r.use(Us()),r.set(ms?gs:(ms=1,gs=function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch(e){}})),bs=r}function Bs(){return vs||(vs=1,"production"===process.env.NODE_ENV?Ao.exports=function(){if(Lo)return Co;Lo=1;var e=Do()((function e(t,r){return(r=r||{}).namespace=t,r.prod=!0,r.dev=!1,r.force||e.force?e.yep(r):e.nope(r)}));return Co=e}():Ao.exports=Fs()),Ao.exports}function Ws(){if(ws)return _s;ws=1;const e=h,{StringDecoder:t}=g,{Stream:r}=Ro();function n(){}return _s=(i,o)=>{const s=Buffer.alloc(65536),a=new t("utf8"),l=new r;let u="",c=0,f=0;return-1===i.start&&delete i.start,l.readable=!0,l.destroy=()=>{l.destroyed=!0,l.emit("end"),l.emit("close")},e.open(i.file,"a+","0644",((t,r)=>{if(t)return o?o(t):l.emit("error",t),void l.destroy();!function t(){if(!l.destroyed)return e.read(r,s,0,s.length,c,((e,r)=>{if(e)return o?o(e):l.emit("error",e),void l.destroy();if(!r)return u&&((null==i.start||f>i.start)&&(o?o(null,u):l.emit("line",u)),f++,u=""),setTimeout(t,1e3);let n=a.write(s.slice(0,r));o||l.emit("data",n),n=(u+n).split(/\n+/);const h=n.length-1;let d=0;for(;d<h;d++)(null==i.start||f>i.start)&&(o?o(null,n[d]):l.emit("line",n[d])),f++;return u=n[h],c+=r,t()}));e.close(r,n)}()})),o?l.destroy:l},_s}function qs(){if(Es)return Ss;Es=1;const e=h,t=d,r=vo(),n=l,{MESSAGE:i}=ir(),{Stream:o,PassThrough:s}=Ro(),a=Mi(),u=Bs()("winston:file"),c=f,p=Ws();return Ss=class extends a{constructor(e={}){function r(t,...r){r.slice(1).forEach((r=>{if(e[r])throw new Error(`Cannot set ${r} and ${t} together`)}))}if(super(e),this.name=e.name||"file",this._stream=new s,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?t.basename(e.filename):"winston.log",this.dirname=e.dirname||t.dirname(e.filename),this.options=e.options||{flags:"a"};else{if(!e.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=t.dirname(this._dest.path)}this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol="string"==typeof e.eol?e.eol:c.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",(()=>{this._stream.once("finish",(()=>this.emit("finish"))),setImmediate((()=>this._stream.end()))})):(this._stream.once("finish",(()=>this.emit("finish"))),setImmediate((()=>this._stream.end()))))}log(e,t=()=>{}){if(this.silent)return t(),!0;if(this._drain)return void this._stream.once("drain",(()=>{this._drain=!1,this.log(e,t)}));if(this._rotate)return void this._stream.once("rotate",(()=>{this._rotate=!1,this.log(e,t)}));if(this.lazy){if(!this._fileExist)return this._opening||this.open(),void this.once("open",(()=>{this._fileExist=!0,this.log(e,t)}));if(this._needsNewFile(this._pendingSize))return void this._dest.once("close",(()=>{this._opening||this.open(),this.once("open",(()=>{this.log(e,t)}))}))}const r=`${e[i]}${this.eol}`,n=Buffer.byteLength(r);this._pendingSize+=n,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);const o=this._stream.write(r,function(){this._size+=n,this._pendingSize-=n,u("logged %s %s",this._size,r),this.emit("logged",e),this._rotate||this._opening||this._needsNewFile()&&(this.lazy?this._endStream((()=>{this.emit("fileclosed")})):(this._rotate=!0,this._endStream((()=>this._rotateFile()))))}.bind(this));return o?t():(this._drain=!0,this._stream.once("drain",(()=>{this._drain=!1,t()}))),u("written",o,this._drain),this.finishIfEnding(),o}query(r,n){"function"==typeof r&&(n=r,r={}),r=function(e){e=e||{},e.rows=e.rows||e.limit||10,e.start=e.start||0,e.until=e.until||new Date,"object"!=typeof e.until&&(e.until=new Date(e.until));e.from=e.from||e.until-864e5,"object"!=typeof e.from&&(e.from=new Date(e.from));return e.order=e.order||"desc",e}(r);const i=t.join(this.dirname,this.filename);let o="",s=[],a=0;const l=e.createReadStream(i,{encoding:"utf8"});function u(e,t){try{const t=JSON.parse(e);(function(e){if(!e)return;if("object"!=typeof e)return;const t=new Date(e.timestamp);if(r.from&&t<r.from||r.until&&t>r.until||r.level&&r.level!==e.level)return;return!0})(t)&&function(e){if(r.rows&&s.length>=r.rows&&"desc"!==r.order)return void(l.readable&&l.destroy());r.fields&&(e=r.fields.reduce(((t,r)=>(t[r]=e[r],t)),{}));"desc"===r.order&&s.length>=r.rows&&s.shift();s.push(e)}(t)}catch(e){t||l.emit("error",e)}}l.on("error",(e=>{if(l.readable&&l.destroy(),n)return"ENOENT"!==e.code?n(e):n(null,s)})),l.on("data",(e=>{const t=(e=(o+e).split(/\n+/)).length-1;let n=0;for(;n<t;n++)(!r.start||a>=r.start)&&u(e[n]),a++;o=e[t]})),l.on("close",(()=>{o&&u(o,!0),"desc"===r.order&&(s=s.reverse()),n&&n(null,s)}))}stream(e={}){const r=t.join(this.dirname,this.filename),n=new o,i={file:r,start:e.start};return n.destroy=p(i,((e,t)=>{if(e)return n.emit("error",e);try{n.emit("data",t),t=JSON.parse(t),n.emit("log",t)}catch(e){n.emit("error",e)}})),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat(((e,t)=>{if(e)return this.emit("error",e);u("stat done: %s { size: %s }",this.filename,t),this._size=t,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",(()=>{this._stream.emit("rotate")||(this._rotate=!1)}))}))))}stat(r){const n=this._getFile(),i=t.join(this.dirname,n);e.stat(i,((e,t)=>e&&"ENOENT"===e.code?(u("ENOENT ok",i),this.filename=n,r(null,0)):e?(u(`err ${e.code} ${i}`),r(e)):!t||this._needsNewFile(t.size)?this._incFile((()=>this.stat(r))):(this.filename=n,void r(null,t.size))))}close(e){this._stream&&this._stream.end((()=>{e&&e(),this.emit("flush"),this.emit("closed")}))}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile((()=>this.open()))}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end((()=>{this._cleanupStream(this._dest),e()}))):e()}_createStream(r){const n=t.join(this.dirname,this.filename);u("create stream start",n,this.options);const i=e.createWriteStream(n,this.options).on("error",(e=>u(e))).on("close",(()=>u("close",i.path,i.bytesWritten))).on("open",(()=>{u("file open ok",n),this.emit("open",n),r.pipe(i),this.rotatedWhileOpening&&(this._stream=new s,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(i),r.end())}));return u("create stream ok",n),i}_incFile(e){u("_incFile",this.filename);const n=t.extname(this._basename),i=t.basename(this._basename,n),o=[];this.zippedArchive&&o.push(function(e){const r=this._created>0&&!this.tailable?this._created:"";this._compressFile(t.join(this.dirname,`${i}${r}${n}`),t.join(this.dirname,`${i}${r}${n}.gz`),e)}.bind(this)),o.push(function(e){this.tailable?this._checkMaxFilesTailable(n,i,e):(this._created+=1,this._checkMaxFilesIncrementing(n,i,e))}.bind(this)),r(o,e)}_getFile(){const e=t.extname(this._basename),r=t.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(r,n,i){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(i);const o=this._created-this.maxFiles,s=`${n}${0!==o?o:""}${r}${this.zippedArchive?".gz":""}`,a=t.join(this.dirname,s);e.unlink(a,i)}_checkMaxFilesTailable(n,i,o){const s=[];if(!this.maxFiles)return;const a=this.zippedArchive?".gz":"";for(let r=this.maxFiles-1;r>1;r--)s.push(function(r,o){let s=`${i}${r-1}${n}${a}`;const l=t.join(this.dirname,s);e.exists(l,(u=>{if(!u)return o(null);s=`${i}${r}${n}${a}`,e.rename(l,t.join(this.dirname,s),o)}))}.bind(this,r));r(s,(()=>{e.rename(t.join(this.dirname,`${i}${n}${a}`),t.join(this.dirname,`${i}1${n}${a}`),o)}))}_compressFile(t,r,i){e.access(t,e.F_OK,(o=>{if(o)return i();var s=n.createGzip(),a=e.createReadStream(t),l=e.createWriteStream(r);l.on("finish",(()=>{e.unlink(t,i)})),a.pipe(s).pipe(l)}))}_createLogDirIfNotExist(t){e.existsSync(t)||e.mkdirSync(t,{recursive:!0})}},Ss}function Gs(){if(Ms)return Os;Ms=1;const e=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;return e.writable=t=>e(t)&&!1!==t.writable&&"function"==typeof t._write&&"object"==typeof t._writableState,e.readable=t=>e(t)&&!1!==t.readable&&"function"==typeof t._read&&"object"==typeof t._readableState,e.duplex=t=>e.writable(t)&&e.readable(t),e.transform=t=>e.duplex(t)&&"function"==typeof t._transform,Os=e}function zs(){return Rs||(Rs=1,e=Pn,Object.defineProperty(e,"Console",{configurable:!0,enumerable:!0,get:()=>function(){if(xi)return Ei;xi=1;const e=f,{LEVEL:t,MESSAGE:r}=ir(),n=Mi();return Ei=class extends n{constructor(t={}){super(t),this.name=t.name||"console",this.stderrLevels=this._stringArrayToSet(t.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(t.consoleWarnLevels),this.eol="string"==typeof t.eol?t.eol:e.EOL,this.forceConsole=t.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,n){return setImmediate((()=>this.emit("logged",e))),this.stderrLevels[e[t]]?(console._stderr&&!this.forceConsole?console._stderr.write(`${e[r]}${this.eol}`):this._consoleError(e[r]),void(n&&n())):this.consoleWarnLevels[e[t]]?(console._stderr&&!this.forceConsole?console._stderr.write(`${e[r]}${this.eol}`):this._consoleWarn(e[r]),void(n&&n())):(console._stdout&&!this.forceConsole?console._stdout.write(`${e[r]}${this.eol}`):this._consoleLog(e[r]),void(n&&n()))}_stringArrayToSet(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce(((e,r)=>{if("string"!=typeof r)throw new Error(t);return e[r]=!0,e}),{})}}}()}),Object.defineProperty(e,"File",{configurable:!0,enumerable:!0,get:()=>qs()}),Object.defineProperty(e,"Http",{configurable:!0,enumerable:!0,get:()=>function(){if(ks)return xs;ks=1;const e=r,n=t,{Stream:i}=Ro(),o=Mi(),{configure:s}=Tr();return xs=class extends o{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,t){this._request(e,null,null,((t,r)=>{r&&200!==r.statusCode&&(t=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)),t?this.emit("warn",t):this.emit("logged",e)})),t&&setImmediate(t)}query(e,t){"function"==typeof e&&(t=e,e={});const r=(e={method:"query",params:this.normalizeQuery(e)}).params.auth||null;delete e.params.auth;const n=e.params.path||null;delete e.params.path,this._request(e,r,n,((e,r,n)=>{if(r&&200!==r.statusCode&&(e=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)),e)return t(e);if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return t(e)}t(null,n)}))}stream(e={}){const t=new i,r=(e={method:"stream",params:e}).params.path||null;delete e.params.path;const n=e.params.auth||null;delete e.params.auth;let o="";const s=this._request(e,n,r);return t.destroy=()=>s.destroy(),s.on("data",(e=>{const r=(e=(o+e).split(/\n+/)).length-1;let n=0;for(;n<r;n++)try{t.emit("log",JSON.parse(e[n]))}catch(e){t.emit("error",e)}o=e[r]})),s.on("error",(e=>t.emit("error",e))),t}_request(e,t,r,n){e=e||{},t=t||this.auth,r=r||this.path||"",this.batch?this._doBatch(e,n,t,r):this._doRequest(e,n,t,r)}_doBatch(e,t,r,n){if(this.batchOptions.push(e),1===this.batchOptions.length){const e=this;this.batchCallback=t,this.batchTimeoutID=setTimeout((function(){e.batchTimeoutID=-1,e._doBatchRequest(e.batchCallback,r,n)}),this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,r,n)}_doBatchRequest(e,t,r){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);const n=this.batchOptions.slice();this.batchOptions=[],this._doRequest(n,e,t,r)}_doRequest(t,r,i,o){const a=Object.assign({},this.headers);i&&i.bearer&&(a.Authorization=`Bearer ${i.bearer}`);const l=(this.ssl?n:e).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${o.replace(/^\//,"")}`,headers:a,auth:i&&i.username&&i.password?`${i.username}:${i.password}`:"",agent:this.agent});l.on("error",r),l.on("response",(e=>e.on("end",(()=>r(null,e))).resume()));const u=s({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});l.end(Buffer.from(u(t,this.options.replacer),"utf8"))}},xs}()}),Object.defineProperty(e,"Stream",{configurable:!0,enumerable:!0,get:()=>function(){if(Ts)return js;Ts=1;const e=Gs(),{MESSAGE:t}=ir(),r=f,n=Mi();return js=class extends n{constructor(t={}){if(super(t),!t.stream||!e(t.stream))throw new Error("options.stream is required.");this._stream=t.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=t.stream._writableState.objectMode,this.eol="string"==typeof t.eol?t.eol:r.EOL}log(e,r){if(setImmediate((()=>this.emit("logged",e))),this.isObjectMode)return this._stream.write(e),void(r&&r());this._stream.write(`${e[t]}${this.eol}`),r&&r()}}}()})),Pn;var e}var Hs,Vs={};function Ys(){if(Hs)return Vs;Hs=1;const e=_n(),{configs:t}=ir();return Vs.cli=e.levels(t.cli),Vs.npm=e.levels(t.npm),Vs.syslog=e.levels(t.syslog),Vs.addColors=e.levels,Vs}var Js,Zs={exports:{}},Ks={exports:{}};var Xs,Qs,ea,ta,ra,na,ia={exports:{}};function oa(){return Qs||(Qs=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=(Js||(Js=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Ni()),n=u(mo()),i=u(yo()),o=u(Xi()),s=u(so()),a=u(Wi()),l=u(Hi());function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){r=(0,o.default)(r);var i=0,a=0,{length:l}=e,u=!1;function c(e,t){!1===e&&(u=!0),!0!==u&&(e?r(e):++a!==l&&t!==n.default||r(null))}for(0===l&&r(null);i<l;i++)t(e[i],i,(0,s.default)(c))}function f(e,t,r){return(0,i.default)(e,1/0,t,r)}t.default=(0,l.default)((function(e,t,n){return((0,r.default)(e)?c:f)(e,(0,a.default)(t),n)}),3),e.exports=t.default}(Ks,Ks.exports)),Ks.exports),n=l(r),i=function(){return Xs||(Xs=1,e=ia,t=ia.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(t,r,n)=>e(t,n)},e.exports=t.default),ia.exports;var e,t}(),o=l(i),s=l(Wi()),a=l(Hi());function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)((function(e,t,r){return(0,n.default)(e,(0,o.default)((0,s.default)(t)),r)}),3),e.exports=t.default}(Zs,Zs.exports)),Zs.exports}function sa(){if(na)return ra;na=1;var e=function(){if(ta)return ea;ta=1;var e=Object.prototype.toString;return ea=function(t){if("string"==typeof t.displayName&&t.constructor.name)return t.displayName;if("string"==typeof t.name&&t.name)return t.name;if("object"==typeof t&&t.constructor&&"string"==typeof t.constructor.name)return t.constructor.name;var r=t.toString(),n=e.call(t).slice(8,-1);return(r="Function"===n?r.substring(r.indexOf("(")+1,r.indexOf(")")):n)||"anonymous"}}();return ra=function(t){var r,n=0;function i(){return n||(n=1,r=t.apply(this,arguments),t=null),r}return i.displayName=e(t),i},ra}var aa,la,ua,ca,fa,ha,da,pa,ga,ma,ba,ya,va,_a,wa,Sa,Ea,xa,ka,Oa,Ma,ja,Ta,Ra,Pa,Na={};function Ca(){return aa||(aa=1,function(e){function t(e){for(var t in e)this[t]=e[t]}e.get=function(t){var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var n={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(n,t||e.get);var o=n.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=r,o},e.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var r=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(r){var n=null,i=null,o=null,s=null,a=null,l="native"===r[5];if(r[1]){var u=(o=r[1]).lastIndexOf(".");if("."==o[u-1]&&u--,u>0){n=o.substr(0,u),i=o.substr(u+1);var c=n.indexOf(".Module");c>0&&(o=o.substr(c+1),n=n.substr(0,c))}s=null}i&&(s=n,a=i),"<anonymous>"===i&&(a=null,o=null);var f={fileName:r[2]||null,lineNumber:parseInt(r[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(r[4],10)||null,native:l};return t._createParsedCallSite(f)}})).filter((function(e){return!!e}))};["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){t.prototype[e]=null,t.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){t.prototype[e]=!1,t.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),e._createParsedCallSite=function(e){return new t(e)}}(Na)),Na}function La(){if(fa)return ca;fa=1;const e=f,t=oa(),r=Bs()("winston:exception"),n=sa(),i=Ca(),o=function(){if(ua)return la;ua=1;const{Writable:e}=Ro();return la=class extends e{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,t,r){return e.exception?this.transport.log(e,r):(r(),!0)}}}();return ca=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e))return e.forEach((e=>this._addHandler(e)));this._addHandler(e)})),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e))))}getAllInfo(e){let t=null;return e&&(t="string"==typeof e?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join("\n"),stack:e&&e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:e.loadavg(),uptime:e.uptime()}}getTrace(e){return(e?i.parse(e):i.get()).map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;const t=new o(e);this.handlers.set(e,t),this.logger.pipe(t)}}_uncaughtException(e){const i=this.getAllInfo(e),o=this._getExceptionHandlers();let s,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function l(){r("doExit",a),r("process._exiting",process._exiting),a&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!o.length&&a&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),a=!1),!o||0===o.length)return process.nextTick(l);t(o,((e,t)=>{const i=n(t),o=e.transport||e;function s(e){return()=>{r(e),i()}}o._ending=!0,o.once("finish",s("finished")),o.once("error",s("error"))}),(()=>a&&l())),this.logger.log(i),a&&(s=setTimeout(l,3e3))}_getExceptionHandlers(){return this.logger.transports.filter((e=>(e.transport||e).handleExceptions))}},ca}function Aa(){if(ga)return pa;ga=1;const e=f,t=oa(),r=Bs()("winston:rejection"),n=sa(),i=Ca(),o=function(){if(da)return ha;da=1;const{Writable:e}=Ro();return ha=class extends e{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,t,r){return e.rejection?this.transport.log(e,r):(r(),!0)}}}();return pa=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e))return e.forEach((e=>this._addHandler(e)));this._addHandler(e)})),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e))))}getAllInfo(e){let t=null;return e&&(t="string"==typeof e?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join("\n"),stack:e&&e.stack,rejection:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:e.loadavg(),uptime:e.uptime()}}getTrace(e){return(e?i.parse(e):i.get()).map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;const t=new o(e);this.handlers.set(e,t),this.logger.pipe(t)}}_unhandledRejection(e){const i=this.getAllInfo(e),o=this._getRejectionHandlers();let s,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function l(){r("doExit",a),r("process._exiting",process._exiting),a&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!o.length&&a&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),a=!1),!o||0===o.length)return process.nextTick(l);t(o,((e,t)=>{const i=n(t),o=e.transport||e;function s(e){return()=>{r(e),i()}}o._ending=!0,o.once("finish",s("finished")),o.once("error",s("error"))}),(()=>a&&l())),this.logger.log(i),a&&(s=setTimeout(l,3e3))}_getRejectionHandlers(){return this.logger.transports.filter((e=>(e.transport||e).handleRejections))}},pa}function Da(){if(va)return ya;va=1;const{Stream:e,Transform:t}=Ro(),r=oa(),{LEVEL:n,SPLAT:i}=ir(),o=Gs(),s=La(),a=Aa(),l=Oi(),u=(ba||(ba=1,ma=class{constructor(e){const t=Da();if("object"!=typeof e||Array.isArray(e)||!(e instanceof t))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){"function"==typeof e[e.length-1]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());const t="object"==typeof e[e.length-1]?e.pop():{};return t.level=t.level||"info",t.durationMs=Date.now()-this.start,this.logger.write(t)}}),ma),{warn:c}=En(),f=Ys(),h=/%[scdjifoO%]/g;class d extends t{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(r){const n=Object.assign({},e,r);r instanceof Error&&(n.stack=r.stack,n.message=r.message),t.write(n)}}})}configure({silent:e,format:t,defaultMeta:r,levels:n,level:i="info",exitOnError:o=!0,transports:l,colors:u,emitErrs:c,formatters:h,padLevels:d,rewriters:p,stripColors:g,exceptionHandlers:m,rejectionHandlers:b}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=t||this.format||Rr()(),this.defaultMeta=r||null,this.levels=n||this.levels||f.npm.levels,this.level=i,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new s(this),this.rejections=new a(this),this.profilers={},this.exitOnError=o,l&&(l=Array.isArray(l)?l:[l]).forEach((e=>this.add(e))),u||c||h||d||p||g)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"));m&&this.exceptions.handle(m),b&&this.rejections.handle(b)}isLevelEnabled(e){const t=p(this.levels,e);if(null===t)return!1;const r=p(this.levels,this.level);if(null===r)return!1;if(!this.transports||0===this.transports.length)return r>=t;return-1!==this.transports.findIndex((e=>{let n=p(this.levels,e.level);return null===n&&(n=r),n>=t}))}log(e,t,...r){if(1===arguments.length)return e[n]=e.level,this._addDefaultMeta(e),this.write(e),this;if(2===arguments.length)return t&&"object"==typeof t?(t[n]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(t={[n]:e,level:e,message:t},this._addDefaultMeta(t),this.write(t),this);const[o]=r;if("object"==typeof o&&null!==o){if(!(t&&t.match&&t.match(h))){const s=Object.assign({},this.defaultMeta,o,{[n]:e,[i]:r,level:e,message:t});return o.message&&(s.message=`${s.message} ${o.message}`),o.stack&&(s.stack=o.stack),o.cause&&(s.cause=o.cause),this.write(s),this}}return this.write(Object.assign({},this.defaultMeta,{[n]:e,[i]:r,level:e,message:t})),this}_transform(e,t,r){if(this.silent)return r();e[n]||(e[n]=e.level),this.levels[e[n]]||0===this.levels[e[n]]||console.error("[winston] Unknown logger level: %s",e[n]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,r()}}_final(e){const t=this.transports.slice();r(t,((e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t),e.end()}),e)}add(e){const t=!o(e)||e.log.length>2?new l({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let t=e;return(!o(e)||e.log.length>2)&&(t=this.transports.filter((t=>t.transport===e))[0]),t&&this.unpipe(t),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){c.deprecated("setLevels")}query(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};const n={},i=Object.assign({},e.query||{});r(this.transports.filter((e=>!!e.query)),(function(t,r){!function(t,r){e.query&&"function"==typeof t.formatQuery&&(e.query=t.formatQuery(i)),t.query(e,((n,i)=>{if(n)return r(n);"function"==typeof t.formatResults&&(i=t.formatResults(i,e.format)),r(null,i)}))}(t,((e,i)=>{r&&((i=e||i)&&(n[t.name]=i),r()),r=null}))}),(()=>t(null,n)))}stream(t={}){const r=new e,n=[];return r._streams=n,r.destroy=()=>{let e=n.length;for(;e--;)n[e].destroy()},this.transports.filter((e=>!!e.stream)).forEach((e=>{const i=e.stream(t);i&&(n.push(i),i.on("log",(t=>{t.transport=t.transport||[],t.transport.push(e.name),r.emit("log",t)})),i.on("error",(t=>{t.transport=t.transport||[],t.transport.push(e.name),r.emit("error",t)})))})),r}startTimer(){return new u(this)}profile(e,...t){const r=Date.now();if(this.profilers[e]){const n=this.profilers[e];delete this.profilers[e],"function"==typeof t[t.length-2]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());const i="object"==typeof t[t.length-1]?t.pop():{};return i.level=i.level||"info",i.durationMs=r-n,i.message=i.message||e,this.write(i)}return this.profilers[e]=r,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){t["__winston"+e]||(t["__winston"+e]=function(r){"error"!==e||this.transports.includes(t)||this.add(t),this.emit(e,r,t)}.bind(this),t.on(e,t["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}}function p(e,t){const r=e[t];return r||0===r?r:null}return Object.defineProperty(d.prototype,"transports",{configurable:!1,enumerable:!0,get(){const{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}}),ya=d}function $a(){if(wa)return _a;wa=1;const{LEVEL:e}=ir(),t=Ys(),r=Da(),n=Bs()("winston:create-logger");return _a=function(i={}){i.levels=i.levels||t.npm.levels;class o extends r{constructor(e){super(e)}}const s=new o(i);return Object.keys(i.levels).forEach((function(t){n('Define prototype method for "%s"',t),"log"!==t?(o.prototype[t]=function(...r){const n=this||s;if(1===r.length){const[i]=r,o=i&&i.message&&i||{message:i};return o.level=o[e]=t,n._addDefaultMeta(o),n.write(o),this||s}return 0===r.length?(n.log(t,""),n):n.log(t,...r)},o.prototype[function(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}(t)]=function(){return(this||s).isLevelEnabled(t)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')})),s},_a}function Ia(){return xa||(xa=1,function(e){const t=_n(),{warn:r}=En();e.version=Rn,e.transports=zs(),e.config=Ys(),e.addColors=t.levels,e.format=t.format,e.createLogger=$a(),e.Logger=Da(),e.ExceptionHandler=La(),e.RejectionHandler=Aa(),e.Container=function(){if(Ea)return Sa;Ea=1;const e=$a();return Sa=class{constructor(e={}){this.loggers=new Map,this.options=e}add(t,r){if(!this.loggers.has(t)){const n=(r=Object.assign({},r||this.options)).transports||this.options.transports;r.transports=n?Array.isArray(n)?n.slice():[n]:[];const i=e(r);i.on("close",(()=>this._delete(t))),this.loggers.set(t,i)}return this.loggers.get(t)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach(((e,t)=>this._removeLogger(t)))}_removeLogger(e){this.loggers.has(e)&&(this.loggers.get(e).close(),this._delete(e))}_delete(e){this.loggers.delete(e)}},Sa}(),e.Transport=Mi(),e.loggers=new e.Container;const n=e.createLogger();Object.keys(e.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach((t=>e[t]=(...e)=>n[t](...e))),Object.defineProperty(e,"level",{get:()=>n.level,set(e){n.level=e}}),Object.defineProperty(e,"exceptions",{get:()=>n.exceptions}),Object.defineProperty(e,"rejections",{get:()=>n.rejections}),["exitOnError"].forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set(e){n[t]=e}})})),Object.defineProperty(e,"default",{get:()=>({exceptionHandlers:n.exceptionHandlers,rejectionHandlers:n.rejectionHandlers,transports:n.transports})}),r.deprecated(e,"setLevels"),r.forFunctions(e,"useFormat",["cli"]),r.forProperties(e,"useFormat",["padLevels","stripColors"]),r.forFunctions(e,"deprecated",["addRewriter","addFilter","clone","extend"]),r.forProperties(e,"deprecated",["emitErrs","levelLength"])}(ut)),ut}function Ua(){if(Oa)return ka;Oa=1;const e=Ia();var t=null;return f.platform(),ka={logger:t||(t=function(){let t=e.format.combine(e.format.colorize({all:!0}),e.format.label({label:"> LOG"}),e.format.timestamp({format:"YY-MM-DD HH:mm:ss"}),e.format.printf((e=>`${e.label} ${e.timestamp} ${e.level}-> ${e.message}`)));e.addColors({info:"bold cyan",warn:"yellowBG bold white",error:"redBG bold white",debug:"green"});const r=e.createLogger({level:"debug",format:e.format.combine(e.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),e.format.printf((e=>`${e.timestamp} ${e.level}: ${e.message}`))),transports:[]});return r.add(new e.transports.Console({format:e.format.combine(e.format.colorize(),t)})),["info","warn","error","debug"].forEach((e=>{const t=r[e];r[e]=(...e)=>{const n=function(e){return e.map((e=>e instanceof Error?`${e.message}\n${e.stack}`:e instanceof Uint8Array?`Uint8Array [ ${Array.from(e).map((e=>`0x${e.toString(16).padStart(2,"0")}`)).join(", ")} ]`:"object"==typeof e&&null!==e?JSON.stringify(e,null,2):String(e))).join(" ")}(e);t.call(r,n)}})),r}())}}function Fa(){if(ja)return Ma;function e(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function t(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}return ja=1,Ma=function(r,n){n||(n={});var i={bools:{},strings:{},unknownFn:null};"function"==typeof n.unknown&&(i.unknownFn=n.unknown),"boolean"==typeof n.boolean&&n.boolean?i.allBools=!0:[].concat(n.boolean).filter(Boolean).forEach((function(e){i.bools[e]=!0}));var o={};function s(e){return o[e].some((function(e){return i.bools[e]}))}Object.keys(n.alias||{}).forEach((function(e){o[e]=[].concat(n.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(n.string).filter(Boolean).forEach((function(e){i.strings[e]=!0,o[e]&&[].concat(o[e]).forEach((function(e){i.strings[e]=!0}))}));var a=n.default||{},l={_:[]};function u(e,r,n){for(var o=e,s=0;s<r.length-1;s++){var a=r[s];if(t(o,a))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var l=r[r.length-1];t(o,l)||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[l]||i.bools[l]||"boolean"==typeof o[l]?o[l]=n:Array.isArray(o[l])?o[l].push(n):o[l]=[o[l],n])}function c(t,r,n){if(!n||!i.unknownFn||function(e,t){return i.allBools&&/^--[^=]+$/.test(t)||i.strings[e]||i.bools[e]||o[e]}(t,n)||!1!==i.unknownFn(n)){var s=!i.strings[t]&&e(r)?Number(r):r;u(l,t.split("."),s),(o[t]||[]).forEach((function(e){u(l,e.split("."),s)}))}}Object.keys(i.bools).forEach((function(e){c(e,void 0!==a[e]&&a[e])}));var f=[];-1!==r.indexOf("--")&&(f=r.slice(r.indexOf("--")+1),r=r.slice(0,r.indexOf("--")));for(var h=0;h<r.length;h++){var d,p,g=r[h];if(/^--.+=/.test(g)){var m=g.match(/^--([^=]+)=([\s\S]*)$/);d=m[1];var b=m[2];i.bools[d]&&(b="false"!==b),c(d,b,g)}else if(/^--no-.+/.test(g))c(d=g.match(/^--no-(.+)/)[1],!1,g);else if(/^--.+/.test(g))d=g.match(/^--(.+)/)[1],void 0===(p=r[h+1])||/^(-|--)[^-]/.test(p)||i.bools[d]||i.allBools||o[d]&&s(d)?/^(true|false)$/.test(p)?(c(d,"true"===p,g),h+=1):c(d,!i.strings[d]||"",g):(c(d,p,g),h+=1);else if(/^-[^-]+/.test(g)){for(var y=g.slice(1,-1).split(""),v=!1,_=0;_<y.length;_++)if("-"!==(p=g.slice(_+2))){if(/[A-Za-z]/.test(y[_])&&"="===p[0]){c(y[_],p.slice(1),g),v=!0;break}if(/[A-Za-z]/.test(y[_])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(p)){c(y[_],p,g),v=!0;break}if(y[_+1]&&y[_+1].match(/\W/)){c(y[_],g.slice(_+2),g),v=!0;break}c(y[_],!i.strings[y[_]]||"",g)}else c(y[_],p,g);d=g.slice(-1)[0],v||"-"===d||(!r[h+1]||/^(-|--)[^-]/.test(r[h+1])||i.bools[d]||o[d]&&s(d)?r[h+1]&&/^(true|false)$/.test(r[h+1])?(c(d,"true"===r[h+1],g),h+=1):c(d,!i.strings[d]||"",g):(c(d,r[h+1],g),h+=1))}else if(i.unknownFn&&!1===i.unknownFn(g)||l._.push(i.strings._||!e(g)?g:Number(g)),n.stopEarly){l._.push.apply(l._,r.slice(h+1));break}}return Object.keys(a).forEach((function(e){var t,r,n;t=l,r=e.split("."),n=t,r.slice(0,-1).forEach((function(e){n=n[e]||{}})),r[r.length-1]in n||(u(l,e.split("."),a[e]),(o[e]||[]).forEach((function(t){u(l,t.split("."),a[e])})))})),n["--"]?l["--"]=f.slice():f.forEach((function(e){l._.push(e)})),l}}function Ba(){if(Ra)return Ta;Ra=1;const e=ie(),t=function(){if(it)return nt;it=1;const e=st().v4;class t{constructor(t,r,n,i){this.type=t,this.payload=r,this.timestamp=Date.now(),this.uuid=n||e(),this.status=i||"pending"}toString(){return`PluginCommand(type=${this.type}, uuid=${this.uuid})`}toJSON(){return{type:this.type,payload:this.payload,timestamp:this.timestamp,uuid:this.uuid,status:this.status}}static fromJSON(e){const r="string"==typeof e?JSON.parse(e):e;return new t(r.type,r.payload,r.uuid,r.status)}}return nt=t}(),{logger:r}=Ua(),n=Fa();const i=new class{constructor(){this.serverUrl="",this.ws=null,this.handlers={},this.pendingCalls={}}start(){const{port:n,uid:i,dir:o}=this._parseCommandLineArgs();r.info(`Starting plugin client with port ${n} and uid ${i}`),n&&i||(r.error("Usage: node plugin_client.js --port=<port> --uid=<uid>"),process.exit(1)),this.serverUrl=`ws://localhost:${n}`,this.ws=new e(this.serverUrl),this.ws.on("open",(()=>{r.info(`Connected to server at ${this.serverUrl}`);const e=new t("startup",{pluginID:i});r.debug(`Sending init command: ${e.toString()}`),this.ws.send(JSON.stringify(e.toJSON()))})),this.ws.on("message",(e=>{this._handleMessage(e)})),this.ws.on("close",(()=>{r.warn("Connection closed"),process.exit(0)})),this.ws.on("error",(e=>{r.error(`WebSocket error: ${e.message}`),process.exit(0)}))}_parseCommandLineArgs(){const e=n(process.argv.slice(2),{alias:{p:"port",u:"uid",d:"dir"}});return{port:e.port,uid:e.uid,dir:e.dir}}call(e,r=5e3){return new Promise(((n,i)=>{const o=new t("plugin-message",e);this.pendingCalls[o.uuid]={resolve:n,reject:i,timer:setTimeout((()=>{delete this.pendingCalls[o.uuid],i(new Error("Request timed out"))}),r)},this.ws.send(JSON.stringify(o.toJSON()))}))}on(e,t){this.handlers[e]=t}off(e){delete this.handlers[e]}_handleMessage(e){let n;e=e.toString("utf8");try{n=t.fromJSON(e),r.debug(`Received message: ${n.toString()}`)}catch(t){return void r.error(`Invalid message format: ${e}`)}if(this.pendingCalls[n.uuid]){const{resolve:e,reject:t,timer:r}=this.pendingCalls[n.uuid];return clearTimeout(r),delete this.pendingCalls[n.uuid],void("success"===n.status?e(n.payload):t(new Error(n.payload||"Unknown error")))}const i=this.handlers[n.type];if(i){const e=i(n.payload),r=new t("response",e,n.uuid,"success");this.ws.send(JSON.stringify(r.toJSON()))}}};return Ta=i}var Wa=b(function(){if(Pa)return O;Pa=1;const e=Ba();return e.on("ui-message",(e=>(console.log("Received message from UI:",e),"Hello from plugin!"))),e.start(),setInterval((async()=>{const t=await e.call({data:"Hello from plugin!"});console.log("Received response:",t)}),1e3),O}());export{Wa as default};
